(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[84],{3857:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"row items-stretch",attrs:{padding:""}},[s("q-card",{staticClass:"col-xs-12 bg-transparent",class:t.$q.screen.lt.sm?"q-pa-xs":"q-py-lg q-px-xs",attrs:{flat:""}},[s("div",{staticClass:"row",class:t.$q.screen.lt.sm?"q-px-xs":"q-px-lg"},[s("q-banner",{staticClass:"col-xs-12 q-mb-md bg-info text-white border-radius",scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"info",color:"white"}})]},proxy:!0}])},[t._v("\n          "+t._s(t.$t("external_analytics_info"))+"\n        ")]),t.isExternalWidgetsDisabled?s("q-banner",{staticClass:"col-xs-12 q-my-md bg-warning cursor-pointer text-white border-radius",nativeOn:{click:function(e){return t.openTariffs(e)}},scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"warning",color:"white"}})]},proxy:!0}],null,!1,894313219)},[t._v("\n          "+t._s(t.$t("landing_tariff_medium_1"))+"\n        ")]):t._e(),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customGA"),hint:t.$t("company_analytics_customGA_helper"),readonly:t.isExternalWidgetsDisabled,"bottom-slots":"",error:t.$v.trackers.customGA.$error,"error-message":t.getErrorMessage(t.$v.trackers.customGA,t.t),maxlength:"255"},scopedSlots:t._u([t.isExternalWidgetsDisabled?{key:"prepend",fn:function(){return[s("q-chip",{staticClass:"q-pa-sm",attrs:{color:"warning","text-color":"white"}},[t._v("\n                "+t._s(t.$t("medium_1_abbr"))+"/"+t._s(t.$t("large_1_abbr"))+"\n              ")])]},proxy:!0}:null,{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openGoogleAnalyticsInstruction}})]},proxy:!0}],null,!0),model:{value:t.trackers.customGA,callback:function(e){t.$set(t.trackers,"customGA","string"===typeof e?e.trim():e)},expression:"trackers.customGA"}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customMetrika"),hint:t.$t("company_analytics_customMetrika_helper"),readonly:t.isExternalWidgetsDisabled,error:t.$v.trackers.customMetrika.$error,"error-message":t.getErrorMessage(t.$v.trackers.customMetrika,t.t),"bottom-slots":"",maxlength:"255"},scopedSlots:t._u([t.isExternalWidgetsDisabled?{key:"prepend",fn:function(){return[s("q-chip",{staticClass:"q-pa-sm",attrs:{color:"warning","text-color":"white"}},[t._v("\n                  "+t._s(t.$t("medium_1_abbr"))+"/"+t._s(t.$t("large_1_abbr"))+"\n                ")])]},proxy:!0}:null,{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openYandexMetrikaInstruction}})]},proxy:!0}],null,!0),model:{value:t.trackers.customMetrika,callback:function(e){t.$set(t.trackers,"customMetrika","string"===typeof e?e.trim():e)},expression:"trackers.customMetrika"}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customPixel"),hint:t.$t("company_analytics_customPixel_helper"),readonly:t.isExternalWidgetsDisabled,"bottom-slots":"",error:t.$v.trackers.customPixel.$error,"error-message":t.getErrorMessage(t.$v.trackers.customPixel,t.t),maxlength:"255"},scopedSlots:t._u([t.isExternalWidgetsDisabled?{key:"prepend",fn:function(){return[s("q-chip",{staticClass:"q-pa-sm",attrs:{color:"warning","text-color":"white"}},[t._v("\n                  "+t._s(t.$t("medium_1_abbr"))+"/"+t._s(t.$t("large_1_abbr"))+"\n                ")])]},proxy:!0}:null,{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openFbPixelInstruction}})]},proxy:!0}],null,!0),model:{value:t.trackers.customPixel,callback:function(e){t.$set(t.trackers,"customPixel","string"===typeof e?e.trim():e)},expression:"trackers.customPixel"}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customTiktokPixel"),hint:t.$t("company_analytics_customTiktokPixel_helper"),readonly:t.isExternalWidgetsDisabled,"bottom-slots":"",error:t.$v.trackers.customTiktokPixel.$error,"error-message":t.getErrorMessage(t.$v.trackers.customTiktokPixel,t.t),maxlength:"255"},scopedSlots:t._u([t.isExternalWidgetsDisabled?{key:"prepend",fn:function(){return[s("q-chip",{staticClass:"q-pa-sm",attrs:{color:"warning","text-color":"white"}},[t._v("\n                  "+t._s(t.$t("medium_1_abbr"))+"/"+t._s(t.$t("large_1_abbr"))+"\n                ")])]},proxy:!0}:null,{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openTikTokPixelInstruction}})]},proxy:!0}],null,!0),model:{value:t.trackers.customTiktokPixel,callback:function(e){t.$set(t.trackers,"customTiktokPixel","string"===typeof e?e.trim():e)},expression:"trackers.customTiktokPixel"}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customVK"),hint:t.$t("company_analytics_customVK_helper"),readonly:t.isExternalWidgetsDisabled,error:t.$v.trackers.customVK.$error,"error-message":t.getErrorMessage(t.$v.trackers.customVK,t.t),"bottom-slots":"",maxlength:"255"},scopedSlots:t._u([t.isExternalWidgetsDisabled?{key:"prepend",fn:function(){return[s("q-chip",{staticClass:"q-pa-sm",attrs:{color:"warning","text-color":"white"}},[t._v("\n                "+t._s(t.$t("medium_1_abbr"))+"/"+t._s(t.$t("large_1_abbr"))+"\n              ")])]},proxy:!0}:null,{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openVKPixelInstruction}})]},proxy:!0}],null,!0),model:{value:t.trackers.customVK,callback:function(e){t.$set(t.trackers,"customVK","string"===typeof e?e.trim():e)},expression:"trackers.customVK"}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("company_analytics_customJivo"),hint:t.$t("company_analytics_customJivo_helper"),error:t.$v.trackers.customJivo.$error,"error-message":t.getErrorMessage(t.$v.trackers.customJivo,t.t),maxlength:"255"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:t.openJivoInstruction}})]},proxy:!0}]),model:{value:t.trackers.customJivo,callback:function(e){t.$set(t.trackers,"customJivo","string"===typeof e?e.trim():e)},expression:"trackers.customJivo"}})],1)],1),s("div",{staticClass:"q-mt-lg row justify-center"},[s("q-btn",{staticClass:"col-xs-12 col-sm-3 col-lg-2",attrs:{rounded:"",label:t.$t("action_save"),color:"secondary",icon:"save"},on:{click:t.saveChanges}})],1)])],1)},n=[],a=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("96cf"),s("c973")),o=s.n(a),i=s("9523"),c=s.n(i),l=(s("c5f6"),s("2f62")),u=s("ee47"),p=s("c98f"),m=s("c234"),d=s("d59f"),y=s("1cb6");function k(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?k(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var x={name:"CompanyExternalAnalytics",mixins:[u["a"]],components:{},data:function(){return{t:this.$t.bind(this),trackers:{customGA:null,customPixel:null,customTiktokPixel:null,customVK:null,customMetrika:null,customJivo:null}}},meta:function(){return{title:this.pageTitle}},props:{companyId:{type:[Number,String]}},mounted:function(){this.trackUserAction({actionName:"openWidgetsPage"})},computed:g({},Object(l["c"])("company",["companyDetails","companyTariff"]),{isNotFetched:function(){return!0},isExternalWidgetsDisabled:function(){return this.companyTariff===p["h"].Free1},pageTitle:function(){var t="";return this.companyDetails&&this.companyDetails.urlPath&&(t=this.companyDetails.urlPath),this.$t("company_landing_external_widgets_page_title",{project:t})}}),validations:function(){return{trackers:{customGA:{googleAnalyticsKeyValidator:m["g"]},customPixel:{facebookPixelKeyValidator:m["f"]},customTiktokPixel:{facebookPixelKeyValidator:m["f"]},customVK:{vkPixelKeyValidator:m["B"]},customMetrika:{yandexMetrikaKeyValidator:m["D"]},customJivo:{jivoKeyValidator:m["i"]}}}},methods:g({},Object(l["b"])("auth",["trackUserAction"]),{},Object(l["b"])("company",["updateCompanyClientTrackers","fetchIndividualCompanyDetails"]),{openFbPixelInstruction:function(){window.open("https://seeyour.info/blog/ru/baza-znanij/podklyuchenie-facebook-pixel-dlya-multissylki/","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","facebook-pixel",0,this.$router.currentRoute)},openTikTokPixelInstruction:function(){window.open("https://seeyour.info/blog/ru/baza-znanij/podklyuchenie-pikselya-tiktok-dlya-multissylki/","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","tiktok-pixel",0,this.$router.currentRoute)},openYandexMetrikaInstruction:function(){window.open("https://seeyour.info/blog/ru/baza-znanij/podklyuchenie-yandeks-metriki-dlya-multissylki/","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","yandex-metrika",0,this.$router.currentRoute)},openGoogleAnalyticsInstruction:function(){window.open("https://seeyour.info/blog/ru/baza-znanij/podklyuchenie-google-analytics-dlya-multissylki/","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","google-analytics",0,this.$router.currentRoute)},openVKPixelInstruction:function(){window.open("https://seeyour.info/blog/ru/baza-znanij/podklyuchenie-vk-piksel-dlya-multissylki/","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","vk-pixel",0,this.$router.currentRoute)},openJivoInstruction:function(){window.open("https://www.jivosite.ru/help/installation/nachalo-raboty-s-jivosite.html","_blank"),y["a"].logEvent("analytics-external-widgets-page","open-instruction","jivo-script",0,this.$router.currentRoute)},getErrorMessage:d["a"],fetch:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchIndividualCompanyDetails({variables:{id:this.companyId}});case 2:this.companyDetails&&(this.trackers.customGA=this.companyDetails.customGA,this.trackers.customPixel=this.companyDetails.customPixel,this.trackers.customTiktokPixel=this.companyDetails.customTiktokPixel,this.trackers.customVK=this.companyDetails.customVK,this.trackers.customMetrika=this.companyDetails.customMetrika,this.trackers.customJivo=this.companyDetails.customJivo);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveChanges:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$v.trackers.$touch(),t.prev=1,t.next=4,this.updateCompanyClientTrackers({variables:{trackers:{companyId:this.companyId,customGA:this.trackers.customGA||null,customTiktokPixel:this.trackers.customTiktokPixel||null,customPixel:this.trackers.customPixel||null,customVK:this.trackers.customVK||null,customMetrika:this.trackers.customMetrika||null,customJivo:this.trackers.customJivo||null}}});case 4:y["a"].logEvent("analytics-external-widgets-page","saveChanges","",0,this.$router.currentRoute),this.trackUserAction({actionName:"updateWidgets"}),this.$q.notify({type:"positive",message:this.$t("analytics_trackers_success_updated")}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("analytics_trackers_errors_can_not_save")});case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),openTariffs:function(){y["a"].logEvent("company-tariffs-page","fromElement","analytics-external-widgets",0,this.$router.currentRoute),this.$router.push({name:"tariffs",params:{companyId:this.companyDetails.id}})}})},h=x,f=s("42e1"),b=Object(f["a"])(h,r,n,!1,null,null,null);e["default"]=b.exports}}]);
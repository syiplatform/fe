(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"6b32":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row landing-container relative-position"},[n("div",{staticClass:"row col-xs-12 q-pa-md bg-white border-radius q-pa-xl justify-center"},[n("div",{staticClass:"col-xs-12 q-pb-md text-center",class:{"text-grey-8":t.pending,"text-red":t.declined,"text-green":t.paid}},[t._v("\n      "+t._s(t.message)+"\n    ")]),n("q-no-ssr",[t.pending&&t.needMoreAttempts?n("q-spinner-hourglass",{attrs:{color:"grey-8",size:"50px"}}):t._e()],1),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn"}},[t.paid?n("q-icon",{attrs:{color:"green",size:"50px",name:"done"}}):t._e()],1),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn"}},[t.declined?n("q-icon",{attrs:{color:"red",size:"50px",name:"clear"}}):t._e()],1),!t.pending||t.isUnresolvedStatus?n("div",{staticClass:"q-mt-md col-xs-12 row justify-center items-start"},[t.needShowEmailMessage?n("div",{staticClass:"col-xs-12 text-center text-grey-8 text-weight-bold q-pb-md"},[t._v("\n        "+t._s(t.$t("payment_status_message_email"))+"\n      ")]):t._e(),n("div",{staticClass:"col-xs-12 row items-start justify-center"},[!t.wopayment&&t.clientPaymentDetails.productId&&t.paid&&t.productDetails.secretLink?n("q-btn",{attrs:{type:"a",target:"_blank",href:t.productDetails.secretLink,label:t.productDetails.title}}):!t.wopayment&&t.clientPaymentDetails.isClientCart&&t.paid&&t.productSecretPagedListItems&&t.productSecretPagedListItems.length?n("div",t._l(t.productSecretPagedListItems,(function(e){return n("div",{key:e.id},[e.secretLink?n("q-btn",{staticClass:"block q-mb-sm",attrs:{type:"a",target:"_blank",href:e.secretLink,label:e.title}}):t._e()],1)})),0):n("q-btn",{attrs:{label:t.$t("action_back_to_landing")},on:{click:function(e){return t.goToLanding()}}}),t.isAuthenticated&&t.clientPaymentDetails.isTestPayment?n("q-btn",{attrs:{label:t.$t("action_back_to_payment_systems")},on:{click:function(e){return t.goToCompanyPaymentSystems()}}}):t._e()],1)]):t._e()],1),t.landingConfigurationDetails.isCopyrightHidden?t._e():n("div",{staticClass:"col-xs-12 q-pa-lg relative-position"},[n("copyright",{staticClass:"shadow-text-white"})],1)])},i=[],s=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("96cf"),n("c973")),r=n.n(s),c=n("9523"),o=n.n(c),d=(n("c5f6"),n("2f62")),l=n("2daf"),u=n("138b");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={name:"ClientPaymentStatus",components:{copyright:u["a"]},props:{paymentUid:{type:[String,Number],required:!0},path:{type:String,required:!1},free:{type:[String,Number],required:!1},wopayment:{type:[String,Number],required:!1}},data:function(){return{timerId:0,attempts:0,maxAttempts:10}},meta:function(){return{title:this.landingConfigurationDetails.companyName?"".concat(this.landingConfigurationDetails.companyName," | SEEYOUR.info"):""}},computed:m({},Object(d["c"])("auth",["isAuthenticated"]),{},Object(d["c"])("landingConfiguration",["landingConfigurationDetails"]),{},Object(d["c"])("companyPayment",["clientPaymentStatus","clientPaymentDetails"]),{},Object(d["c"])("product",["productDetails","productSecretPagedListItems"]),{needMoreAttempts:function(){return this.attempts<this.maxAttempts},needShowEmailMessage:function(){return!this.wopayment&&this.paid&&(this.productDetails.needSendEmail||this.productSecretPagedListItems&&this.productSecretPagedListItems.some((function(t){return t.needSendEmail})))},message:function(){var t="";if(this.free)t=this.$t("payment_status_message_free");else if(this.wopayment)t=this.$t("payment_status_message_wopayment");else{if(!this.needMoreAttempts)return this.$t("payment_status_message_unknown");switch(this.clientPaymentStatus){case l["b"].paid:t=this.$t("payment_status_message_paid");break;case l["b"].declined:t=this.$t("payment_status_message_declined");break;default:t=this.$t("payment_status_message_pending")}}return t},pending:function(){return!this.paid&&!this.declined&&!this.unknown&&!this.wopayment},paid:function(){return this.clientPaymentStatus===l["b"].paid},declined:function(){return this.clientPaymentStatus===l["b"].declined},unknown:function(){return this.clientPaymentStatus===l["b"].unknown},isUnresolvedStatus:function(){return!this.needMoreAttempts&&this.pending||this.unknown}}),mounted:function(){var t=this,e=setInterval((function(){t.attempts+=1,t.pending&&t.needMoreAttempts?t.fetch():(clearInterval(e),t.paid&&(t.clientPaymentDetails.productId?t.fetchFullProductDetails({variables:{id:t.clientPaymentDetails.productId,paymentUid:t.paymentUid}}):t.clientPaymentDetails.isClientCart&&t.fetchProductSecretPagedList({variables:{paymentUid:t.paymentUid,companyId:t.clientPaymentDetails.companyId,pageNumber:1,pageSize:1e3}})))}),500);this.resetClientCart(this.clientPaymentDetails.companyId)},methods:m({},Object(d["b"])("companyPayment",["fetchClientPaymentStatus"]),{},Object(d["b"])("product",["fetchFullProductDetails","fetchProductSecretPagedList"]),{},Object(d["b"])("auth",["fetchCurrentUser"]),{},Object(d["d"])("companyPayment",["resetClientCart"]),{fetch:function(){var t=r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchClientPaymentStatus({variables:{uid:this.paymentUid}});case 2:return t.next=4,this.fetchCurrentUser({variables:{}});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goToLanding:function(){this.$router.push({name:"landing"})},goToCompanyPaymentSystems:function(){this.$router.push({name:"payments",params:{companyId:this.clientPaymentDetails.companyId}})}})},h=y,g=n("42e1"),f=Object(g["a"])(h,a,i,!1,null,"83ba6d3c",null);e["default"]=f.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{"258c":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{attrs:{padding:""}},[e("div",[e("div",{staticClass:"q-pa-sm"},[e("div",{staticClass:"text-h5 q-pa-md"},[t._v("\n        "+t._s(t.$t("company_list_title"))+"\n      ")]),e("div",{staticClass:"row q-mb-xs justify-between"},[e("div",{staticClass:"col-xs-12 col-md-6 q-pb-md"},[e("q-input",{staticClass:"q-mx-md",attrs:{debounce:"500",placeholder:t.$t("company_list_filter_name")},model:{value:t.searchTerm,callback:function(a){t.searchTerm=a},expression:"searchTerm"}})],1),e("div",{staticClass:"col-xs-12 col-md-6 q-pb-md"},[e("q-input",{staticClass:"q-mx-md",attrs:{debounce:"500",placeholder:t.$t("company_list_filter_email")},model:{value:t.emailTerm,callback:function(a){t.emailTerm=a},expression:"emailTerm"}})],1),e("div",{staticClass:"col-xs-12 col-md-6 q-pb-md"},[e("q-checkbox",{staticClass:"q-ml-sm",attrs:{"toggle-indeterminate":"",label:t.$t("company_list_filter_has_landing")},model:{value:t.hasLanding,callback:function(a){t.hasLanding=a},expression:"hasLanding"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{staticClass:"q-mx-md",attrs:{filter:"",clearable:"","emit-value":"","map-options":"",multiple:"",color:"primary",label:t.$t("company_list_filter_landing_classification"),options:t.landingCategoryPagedListOptions},model:{value:t.selectedLandingClassifications,callback:function(a){t.selectedLandingClassifications=a},expression:"selectedLandingClassifications"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{staticClass:"q-mx-md",attrs:{filter:"",clearable:"","emit-value":"","map-options":"",color:"primary",label:t.$t("company_list_filter_tariff"),multiple:"",options:t.allTariffs},model:{value:t.selectedTariffs,callback:function(a){t.selectedTariffs=a},expression:"selectedTariffs"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-checkbox",{staticClass:"q-ml-sm",attrs:{"toggle-indeterminate":"",label:t.$t("company_list_filter_isTariffExpired")},model:{value:t.isTariffExpired,callback:function(a){t.isTariffExpired=a},expression:"isTariffExpired"}}),e("q-checkbox",{attrs:{"toggle-indeterminate":"",label:t.$t("company_list_filter_isTrialPeriod")},model:{value:t.isTrialPeriod,callback:function(a){t.isTrialPeriod=a},expression:"isTrialPeriod"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{staticClass:"q-mx-md",attrs:{filter:"",clearable:"","emit-value":"","map-options":"",color:"primary",label:t.$t("company_list_filter_tariffExpirationDateRange"),options:t.tariffExpirationOptions},model:{value:t.selectedTariffExpiration,callback:function(a){t.selectedTariffExpiration=a},expression:"selectedTariffExpiration"}})],1),e("div",{staticClass:"col-xs-12 col-md-6"},[e("q-select",{staticClass:"q-mx-md",attrs:{filter:"",clearable:"","emit-value":"","map-options":"",color:"primary",label:t.$t("company_list_filter_trialtariffExpirationDateRange"),options:t.tariffExpirationOptions},model:{value:t.selectedTrialTariffExpiration,callback:function(a){t.selectedTrialTariffExpiration=a},expression:"selectedTrialTariffExpiration"}})],1),e("div",{staticClass:"col-xs-12 row justify-end q-pt-sm q-px-md"},[e("q-btn",{staticClass:"col-xs-12 col-sm-auto",attrs:{label:t.$t("action_search")},on:{click:function(a){return t.fetchGridData()}}})],1)])]),e("q-table",{attrs:{"row-key":"id",data:t.companyList.items,columns:t.columns,loading:t.loading,pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a},request:t.onRequest},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body-cell-id",fn:function(a){return e("q-td",{attrs:{props:a}},[e("a",{staticClass:"cursor-pointer",on:{click:function(e){return t.goToCompany("individual-details",a.row.id)}}},[t._v("\n            "+t._s(a.row.id)+"\n          ")]),e("a",{staticClass:"no-underline",attrs:{href:t.urls.websiteUrl+"/individual/"+a.row.id+"/details",target:"_blank"}},[e("q-icon",{attrs:{name:"launch"}})],1)])}},{key:"body-cell-email",fn:function(a){return e("q-td",{attrs:{props:a}},[e("a",{staticClass:"cursor-pointer",on:{click:function(e){return t.goToCompany("individual-users",a.row.id)}}},[t._v("\n            "+t._s(a.value)+"\n          ")]),e("a",{staticClass:"no-underline",attrs:{href:t.urls.websiteUrl+"/individual/"+a.row.id+"/users",target:"_blank"}},[e("q-icon",{attrs:{name:"launch"}})],1)])}},{key:"body-cell-urlPath",fn:function(a){return e("q-td",{staticStyle:{"max-width":"150px"},attrs:{props:a}},[a.row.hostnameType===t.hostnameTypes.path?[e("a",{attrs:{href:a.row.urlPath,target:"_blank"}},[t._v(t._s(a.row.urlPath))])]:t._e(),a.row.hostnameType===t.hostnameTypes.subdomain?[e("a",{attrs:{href:a.row.finalPath,target:"_blank"}},[t._v(t._s(a.row.finalPath))])]:t._e(),a.row.hostnameType===t.hostnameTypes.clientDomain?[e("a",{attrs:{href:a.row.finalPath,target:"_blank"}},[t._v(t._s(a.row.finalPath))])]:t._e()],2)}}])})],1)])},n=[],r=(e("8e6e"),e("8a81"),e("456d"),e("96cf"),e("c973")),s=e.n(r),l=e("9523"),o=e.n(l),c=(e("ac6a"),e("cadf"),e("06db"),e("8615"),e("c1df")),d=e.n(c),f=e("2f62"),p=e("c98f"),m=e("d47e"),u=e("aacf"),g=e("a6c8");function h(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function b(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?h(Object(e),!0).forEach((function(a){o()(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var _={name:"CompanyList",data:function(){var t=this;return{hostnameTypes:g["a"],urls:u["a"],loading:!1,pagination:{sortBy:"createdAt",descending:!0,page:1,rowsPerPage:25,rowsNumber:0},columns:[{name:"id",label:this.$t("field_id"),field:"id",align:"left",sortable:!0},{name:"email",label:this.$t("field_email"),field:function(t){return t.locations&&t.locations[0]?t.locations.reduce((function(t,a){return"".concat(t," ").concat(a.email)}),""):""},align:"left",sortable:!1},{name:"urlPath",label:this.$t("field_company_path"),field:"urlPath",align:"left",sortable:!0},{name:"hasLanding",label:this.$t("landing_text"),field:"hasLanding",align:"left",sortable:!1,format:function(a){return a?t.$t("Yes"):t.$t("No")}},{name:"tariff",label:this.$t("tariff"),field:"tariff",align:"left",sortable:!0,format:function(a){return t.$t("".concat(a,"_abbr"))}},{name:"trialExpirationDate",label:this.$t("tariff_is_trial_period"),field:"trialExpirationDate",align:"left",sortable:!0,format:function(t){return t?d()(t).tz("Europe/Saratov").format("DD/MM/YYYY HH:mm:ss"):""}},{name:"createdAt",label:this.$t("field_created_at"),field:"createdAt",align:"left",sortable:!0,format:function(t){return d()(t).tz("Europe/Saratov").format("DD/MM/YYYY HH:mm:ss")}}],allTariffs:Object.values(p["h"]).map((function(a){return{label:t.$t(a),value:a}})),selectedTariffs:[],isTariffExpired:null,isTrialPeriod:null,searchTerm:"",landingClassificationCodes:"",hasLanding:null,emailTerm:"",selectedTariffExpiration:null,selectedTrialTariffExpiration:null,selectedLandingClassifications:null,tariffExpirationOptions:[{label:this.$t("company_list_tariff_expiration_30_days_ago"),days:-30},{label:this.$t("company_list_tariff_expiration_7_days_ago"),days:-7},{label:this.$t("company_list_tariff_expiration_7_days_later"),days:7},{label:this.$t("company_list_tariff_expiration_30_days_later"),days:30}]}},computed:b({},Object(f["c"])("company",["companyList"]),{},Object(f["c"])("landingConfiguration",["landingCategoryPagedListItems"]),{landingCategoryPagedListOptions:function(){var t=this;return this.landingCategoryPagedListItems?this.landingCategoryPagedListItems.map((function(a){return{label:t.$t("classification_".concat(a.title)),value:a.code}})):[]}}),mounted:function(){this.fetchLandingCategoryPagedList({variables:{pageNumber:1,pageSize:100}})},methods:b({},Object(f["b"])("company",["fetchCompanyList"]),{},Object(f["d"])("auth",["setCurrentCompany"]),{},Object(f["b"])("landingConfiguration",["fetchLandingCategoryPagedList"]),{goToCompany:function(t,a){this.setCurrentCompany(a),this.$router.push({name:t,params:{companyId:a}})},fetchGridData:function(){var t=s()(regeneratorRuntime.mark((function t(){var a,e,i,n,r,s,l,o,c,f,p,u,g,h=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=h.length>0&&void 0!==h[0]?h[0]:null,e=a||this.pagination,i=e.page,n=e.rowsPerPage,r=e.sortBy,s=e.descending,this.loading=!0,l={needLanding:!0,hasLanding:this.hasLanding,searchTerm:this.searchTerm,landingClassificationCodes:this.selectedLandingClassifications,emailTerm:this.emailTerm,tariffs:this.selectedTariffs,isTariffExpired:this.isTariffExpired,isTrialPeriod:this.isTrialPeriod,pageNumber:i,pageSize:n,orderBy:r,order:s?"DESC":"ASC"},this.selectedTariffExpiration&&(o=this.selectedTariffExpiration.days,c=d()().tz("Europe/Saratov"),f=c.clone().add(o,"days"),o>0?(l.tariffExpirationStartDate=Object(m["D"])(c),l.tariffExpirationEndDate=Object(m["D"])(f)):(l.tariffExpirationStartDate=Object(m["D"])(f),l.tariffExpirationEndDate=Object(m["D"])(c))),this.selectedTrialTariffExpiration&&(p=this.selectedTrialTariffExpiration.days,u=d()().tz("Europe/Saratov"),g=u.clone().add(p,"days"),p>0?(l.trialExpirationStartDate=Object(m["D"])(u),l.trialExpirationEndDate=Object(m["D"])(g)):(l.trialExpirationStartDate=Object(m["D"])(g),l.trialExpirationEndDate=Object(m["D"])(u))),t.next=8,this.fetchCompanyList({variables:l});case 8:this.pagination.rowsNumber=this.companyList.count,this.pagination.page=i,this.pagination.rowsPerPage=n,this.pagination.sortBy=r,this.pagination.descending=s,this.loading=!1;case 14:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),onRequest:function(){var t=s()(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchGridData(a.pagination);case 2:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}()})},y=_,x=e("42e1"),v=Object(x["a"])(y,i,n,!1,null,null,null);a["default"]=v.exports}}]);
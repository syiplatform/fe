(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{aca2:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"border-radius row"},[n("h1",{staticClass:"text-h5 q-px-md"},[t._v(t._s(t.$t("landing_validation_title")))]),n("q-btn",{staticClass:"q-ma-sm",on:{click:function(e){return t.check()}}},[t._v(t._s(t.$t("retest_all")))]),n("q-table",{staticClass:"col-xs-12",attrs:{"row-key":"id",data:t.landingConfigurationValidationList,columns:t.columns,pagination:t.pagination,dense:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body-cell-landingId",fn:function(e){return n("q-td",{attrs:{props:e}},[e.row.landing?n("router-link",{attrs:{to:{name:"landing-configuration",params:{companyId:e.row.landing.companyId,pageUid:e.row.landing.pageUid}}}},[t._v("\n          "+t._s(e.row.landing.companyId)+"-"+t._s(e.row.landingId)+"\n        ")]):t._e()],1)}},{key:"body-cell-action",fn:function(e){return n("q-td",{attrs:{props:e}},["Ask"===e.row.action?n("div",{staticClass:"row"},[n("q-btn",{staticClass:"col-xs-12",attrs:{size:"sm",color:"primary"},on:{click:function(n){return t.approve(+e.row.id)}}},[t._v("\n            "+t._s(t.$t("landing_validation_approve"))+"\n          ")]),n("q-btn",{staticClass:"col-xs-12 q-mt-sm",attrs:{size:"sm",color:"negative"},on:{click:function(n){return t.decline(e.row.id)}}},[t._v("\n            "+t._s(t.$t("landing_validation_decline"))+"\n          ")])],1):n("div",[t._v(t._s(e.row.action))])])}},{key:"body-cell-result",fn:function(e){return n("q-td",{attrs:{props:e}},[n("q-list",{staticClass:"col",attrs:{"no-border":"",dense:""}},t._l(JSON.parse(e.row.result),(function(e,i){return n("q-item",{key:i,staticClass:"row"},[n("q-item-section",{staticClass:"col-auto",attrs:{side:""}},[t._v(t._s(e.action))]),n("q-item-section",{staticClass:"col"},[n("span",{class:{"text-primary":"RulePicture"===e.ruleName,"text-secondary":"RuleText"===e.ruleName,"text-accent":"RuleUrl"===e.ruleName}},[t._v("\n                "+t._s(e.ruleName)+"\n              ")]),t._v("\n              "+t._s(e.element.componentId)+"\n              "),"RulePicture"===e.ruleName?n("q-btn",{attrs:{size:"xs"},on:{click:function(n){return t.showPicture(e.element.options.userData)}}},[t._v("\n                Picture\n              ")]):t._e(),"RuleText"===e.ruleName?n("q-btn",{attrs:{size:"xs"},on:{click:function(n){return t.showText(e.element.options.userData.html)}}},[t._v("\n                Text\n              ")]):t._e(),"RuleUrl"===e.ruleName?n("a",{attrs:{href:e.element.options.userData.link}},[t._v("\n                "+t._s(e.element.options.userData.linkText)+"\n              ")]):t._e()],1)],1)})),1)],1)}}])})],1),n("q-dialog",{model:{value:t.reviewPictureOpened,callback:function(e){t.reviewPictureOpened=e},expression:"reviewPictureOpened"}},[n("img",{attrs:{src:t.reviewPicturePath}}),n("div",{staticClass:"row"},[t.reviewPictureList&&t.reviewPictureList.length?n("vue-slick-carousel",{key:"carousel",staticClass:"full-width",style:{height:"300px"},attrs:{arrows:!1,dots:!0,autoplay:!0,infinite:!0}},t._l(t.reviewPictureList,(function(t,e){return n("lazy-image",{key:t.id,staticClass:"col-xs-12",attrs:{index:e,height:"300px",src:t.image}})})),1):t._e()],1)])],1)},a=[],r=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("96cf"),n("c973")),s=n.n(r),o=n("9523"),c=n.n(o),l=n("7f45"),u=n.n(l),d=n("2f62"),p=n("ee47"),f=n("5628");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"LandingValidationList",mixins:[p["a"]],data:function(){return{reviewPicturePath:"",reviewPictureList:[],reviewPictureOpened:!1,initialSlide:0,pagination:{sortBy:"updatedAt",descending:!0,page:1,rowsPerPage:50},columns:[{name:"updatedAt",label:this.$t("field_updated_at"),field:"updatedAt",align:"left",sortable:!0,style:"font-size: 10px",format:function(t){return t?u()(t).tz("Europe/Saratov").format("DD/MM/YYYY HH:mm:ss"):""}},{name:"landingId",label:"c-l",field:"landingId",align:"left",sortable:!0},{name:"action",label:this.$t("field_action"),field:"action",align:"left",sortable:!0},{name:"result",label:"",field:"result",align:"left",format:function(t){return JSON.parse(t)}}]}},computed:m({},Object(d["c"])("landingConfiguration",["landingConfigurationValidationList"]),{isNotFetched:function(){return!(this.landingConfigurationValidationList&&this.landingConfigurationValidationList.length)}}),methods:m({},Object(d["b"])("landingConfiguration",["fetchLandingValidationList","approveLandingConfiguration","declineLandingConfiguration","restartLandingValidation"]),{fetch:function(){var t=s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchLandingValidationList({});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),check:function(){this.restartLandingValidation({})},approve:function(t){this.approveLandingConfiguration({variables:{id:t}})},decline:function(){var t=s()(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$q.dialog({title:this.$t("landing_validation_decline_confirmation"),ok:this.$t("Yes"),cancel:this.$t("No")}).onOk(s()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.declineLandingConfiguration({variables:{id:e,needBlockAllInCompany:!0}});case 1:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),showText:function(t){this.$q.dialog({message:t,ok:!0,cancel:!1})},showPicture:function(t){t.image?(this.reviewPictureOpened=!0,this.reviewPicturePath=Object(f["a"])(t.image),this.reviewPictureList=[]):t.list&&(this.reviewPictureOpened=!0,this.reviewPictureList=t.list,this.reviewPicturePath="")}})},v=h,w=n("42e1"),_=Object(w["a"])(v,i,a,!1,null,null,null);e["default"]=_.exports}}]);
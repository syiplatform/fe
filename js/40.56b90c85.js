(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"6a32":function(t,e,s){"use strict";var a=s("8022d"),n=s.n(a);n.a},"6f4e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("q-card",{staticClass:"border-radius q-mb-md bg-white"},[s("div",{staticClass:"row q-pa-md"},[s("q-input",{staticClass:"col q-mr-lg",attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",debounce:100,placeholder:t.$t("request_search_placeholder"),color:"secondary",icon:"search"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1),s("div",{staticClass:"row q-pb-md q-mb-xs justify-between"},[s("div",{staticClass:"col-xs-6 col-md-5"},[s("select-input",{staticClass:"q-mx-md",attrs:{model:t.timeFilterType,label:t.$t("client_details_time_filter"),options:t.timeFilterOptions,disable:t.isDateFilterDisabled,onInput:t.onTimeFilterChange}})],1),s("div",{staticClass:"col-xs-6 col-md-6"},[s("select-input",{staticClass:"q-mx-md",attrs:{model:t.statusFilterType,label:t.$t("client_details_status_filter"),options:t.statusFilterOptions,onInput:t.onStatusFilterChange}})],1)])]),s("q-card",{staticClass:"border-radius q-mb-md bg-white default-font"},[t.companyClientRequestList&&t.companyClientRequestList.length?s("entity-list",{attrs:{list:t.companyClientRequestList,isPossibleToOpenDetailsPage:!1,isPossibleToOpenDetails:!0,isPossibleToConfirm:!1,isPossibleToDelete:!1,namespace:"companyClientsRequest",type:"compact"},scopedSlots:t._u([{key:"title",fn:function(e){var a=e.entity;return[s("span",{staticClass:"text-grey"},[t._v("\n              "+t._s(t._f("dateTimeText")(a.createDate,t.currentUserTimezone))+"\n              ")])]}},{key:"info",fn:function(e){var a=e.entity;return[s("div",{staticClass:"row col items-center"},[s("div",{staticClass:"row justify-between col-xs-12"},[a.type!==t.requestTypes.cartPurchase?s("span",{staticClass:"col-xs-12 col-md text-dark"},[t._v("\n                  "+t._s(a.name)+"\n                ")]):t._e(),a.type===t.requestTypes.cartPurchase?s("span",{staticClass:"col-xs-12 col-md text-dark"},[t._v("\n                  "+t._s(t.$t("client_request_cart_purchase_label",{num:a.id}))+"\n                ")]):t._e(),a.type===t.requestTypes.submittedRequest?s("span",{staticClass:"col-xs-12 col-md-auto",class:"request-"+a.status},[t._v("\n                  "+t._s(t.$t(t.clientRequestStatusFormat(a.status)))+"\n                ")]):t._e(),a.type!==t.requestTypes.submittedRequest?s("div",{staticClass:"row col-xs-12 col-md-auto"},[s("div",{staticClass:"q-pr-sm",class:"request-"+a.status},[t._v("\n                    "+t._s(t.$t(t.clientPaymentStatusTitles[a.status]))+"\n                  ")]),a.clientPaymentHistory?s("div",[t._v("\n                    "+t._s(a.clientPaymentHistory.price)+t._s(a.clientPaymentHistory.currency)+"\n                  ")]):t._e()]):t._e()]),a.comment?s("span",{staticClass:"col-xs-12 text-grey-5"},[t._v("\n                "+t._s(a.comment)+"\n              ")]):t._e()])]}}],null,!1,711224910)}):s("div",{staticClass:"q-pa-sm"},[s("q-banner",{staticClass:"bg-warning q-my-sm text-white border-radius",scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"info",color:"white"}})]},proxy:!0}])},[t._v("\n          "+t._s(t.$t("client_requests_list_empty_message"))+"\n        ")]),s("q-banner",{staticClass:"bg-info text-white col-xs-12 text-caption border-radius",class:t.$q.screen.lt.lg?"q-my-md":"",attrs:{appear:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"more_horiz",color:"white"}})]},proxy:!0}])},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col-xs-12 col-lg text-center"},[t._v("\n              "+t._s(t.$t("read_more_about_client_requests"))+"\n            ")]),s("q-btn",{staticClass:"col-xs-12 col-lg-auto",class:t.$q.screen.lt.lg?"q-mt-sm":"",attrs:{rounded:"",size:"md",outline:"",label:t.$t("open_instruction"),type:"a",target:"_blank",href:t.urls.blog.clientRequestsHowToProcess}})],1)])],1),t.companyId&&t.isCompanyClientRequestFormVisible?s("company-client-request-form",{attrs:{companyId:t.companyId}}):t._e()],1)],1)},n=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("7f7f"),s("96cf"),s("c973")),i=s.n(r),c=s("9523"),l=s.n(c),o=(s("c5f6"),s("1cb6")),u=s("c1df"),m=s.n(u),p=s("2f62"),d=s("ee47"),y=s("b6a6"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{value:t.isCompanyClientRequestFormVisible,maximized:t.$q.screen.lt.sm},on:{"before-hide":t.cancel}},[s("q-layout",{staticClass:"bg-white",attrs:{view:"hhh lpr fFf",container:""}},[s("q-page-container",[s("q-page",{staticClass:"bg-white q-pa-md"},[s("div",{staticClass:"row col full-height"},[s("div",{staticClass:"col-xs-12 full-height"},[s("div",{staticClass:"bg-white sticky-content q-pa-lg"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 q-px-xs"},[s("q-input",{attrs:{label:t.$t("client_requests_name"),maxlength:"255",readonly:"","bottom-slots":""},model:{value:t.clientRequestName,callback:function(e){t.clientRequestName="string"===typeof e?e.trim():e},expression:"clientRequestName"}})],1),t.paymentData?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{value:""+t.paymentData.price+t.paymentData.currency,label:t.$t("field_price"),readonly:"",type:"text"}})],1):t._e(),t.isCreation?t._e():s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.getDateLabel(t.formModel.type),value:t._f("dateTimeText")(t.formModel.createDate,t.currentUserTimezone),readonly:""}})],1),s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[t.formModel.type===t.requestTypes.submittedRequest?s("q-input",{attrs:{label:t.$t("client_requests_status"),value:t.$t(t.clientRequestStatusFormat(t.formModel.status)),readonly:""}}):t._e(),t.isPurchaseType?s("q-input",{attrs:{label:t.$t("client_requests_status"),value:t.$t(t.clientPaymentStatusTitles[t.formModel.status]),readonly:""}}):t._e()],1),t.isPurchaseType&&t.hasPaymentBuyerDetails?s("div",{staticClass:"col-xs-12 q-pa-xs q-my-xs bg-primary-2 border-radius"},[s("div",{staticClass:"q-pa-xs text-caption text-weight-bold"},[t._v("\n                    "+t._s(t.$t("client_payments_data"))+"\n                  ")]),t.paymentData.buyerFullName?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_fullName"),readonly:"",type:"text"},model:{value:t.paymentData.buyerFullName,callback:function(e){t.$set(t.paymentData,"buyerFullName",e)},expression:"paymentData.buyerFullName"}})],1):t._e(),t.paymentData.buyerEmail?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_email"),readonly:"",type:"email"},model:{value:t.paymentData.buyerEmail,callback:function(e){t.$set(t.paymentData,"buyerEmail",e)},expression:"paymentData.buyerEmail"}})],1):t._e(),t.paymentData.buyerPhone?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_phone"),readonly:"",type:"text"},model:{value:t.paymentData.buyerPhone,callback:function(e){t.$set(t.paymentData,"buyerPhone",e)},expression:"paymentData.buyerPhone"}})],1):t._e(),t.paymentData.buyerInstagram?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_instagram"),readonly:"",type:"text"},model:{value:t.paymentData.buyerInstagram,callback:function(e){t.$set(t.paymentData,"buyerInstagram",e)},expression:"paymentData.buyerInstagram"}})],1):t._e(),t.paymentData.buyerAddress?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_address"),readonly:"",type:"text"},model:{value:t.paymentData.buyerAddress,callback:function(e){t.$set(t.paymentData,"buyerAddress",e)},expression:"paymentData.buyerAddress"}})],1):t._e(),t.paymentData.buyerComment?s("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:t.$t("field_comment"),readonly:"",autogrow:"",type:"textarea"},model:{value:t.paymentData.buyerComment,callback:function(e){t.$set(t.paymentData,"buyerComment",e)},expression:"paymentData.buyerComment"}})],1):t._e()]):t._e(),t.isCartPurchaseType&&t.requestItems?s("div",{staticClass:"row col-xs-12 q-pa-xs q-my-xs bg-secondary-2 border-radius"},t._l(t.requestItems,(function(e,a){return s("div",{key:e.id,staticClass:"row col-xs-12 q-px-xs",class:{"border-bottom-dashed":t.$q.screen.lt.sm&&a!==t.requestItems.length-1}},[s("q-input",{staticClass:"col-xs-12 col-sm",attrs:{value:e.productName,label:t.$t("field_name"),readonly:""}}),s("q-input",{staticClass:"col-xs-6 col-sm-auto",attrs:{value:e.quantity,label:t.$t("field_quantity"),readonly:""}}),s("q-input",{staticClass:"col-xs-6 col-sm-auto",attrs:{value:e.price_total,label:t.$t("field_price_total"),readonly:""}})],1)})),0):t._e(),s("div",{staticClass:"col-xs-12 q-px-xs"},[s("q-input",{attrs:{label:t.$t("client_requests_comment"),autogrow:"","max-height":100},model:{value:t.formModel.comment,callback:function(e){t.$set(t.formModel,"comment",e)},expression:"formModel.comment"}})],1),t.formModel.type===t.requestTypes.submittedRequest?s("div",{staticClass:"col-xs-12 row"},t._l(t.requestFields,(function(e){return s("div",{key:e.uid,staticClass:"col-xs-12 col-md-6 q-px-xs"},[s("q-input",{attrs:{label:e.name,readonly:""},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}})],1)})),0):t._e()])])])])])],1),s("q-footer",{staticClass:"bg-white row q-py-sm q-px-md"},[s("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"order-last":"q-mr-sm",attrs:{rounded:"",label:t.$t("action_cancel"),color:"secondary",icon:"arrow_back"},on:{click:t.cancel}}),t.hasSocials?s("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"q-mb-sm":"q-mr-sm",attrs:{rounded:"",color:"accent",label:t.$t("connect_to_client")}},[s("q-menu",{attrs:{"auto-close":""},on:{show:t.logConnectClient}},[s("contacts-popup",{attrs:{contacts:t.userSocials}})],1)],1):t._e(),s("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"q-mb-sm":"q-mr-sm",attrs:{rounded:"",label:t.$t(t.isCreation?"action_create":"action_save"),color:"primary",icon:t.isCreation?"add":"save"},on:{click:t.saveChanges}}),t.hasStatusToggle?s("q-select",{staticClass:"col-xs-12 col-sm-auto status-selector text-center q-pl-md",class:[t.$q.screen.lt.sm?"q-mb-sm order-first":"q-mr-sm","bg-request-"+t.status],attrs:{"emit-value":"","map-options":"",borderless:"",dense:"",dark:"",rounded:"",options:t.statusOptions},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}):t._e()],1)],1)],1)},f=[],b=s("5944"),q=s("d59f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{attrs:{dense:t.$q.screen.gt.sm,"no-border":""}},t._l(t.contactList,(function(e,a){return s("q-item",{key:a,attrs:{link:""},nativeOn:{click:function(s){return t.call(e.link)}}},[s("q-item-section",{attrs:{side:""}},[s("img",{attrs:{alt:"",src:"statics/icons/connection_way/"+e.type+".svg"}})]),s("q-item-section",{staticClass:"text-no-wrap cursor-pointer",attrs:{dense:"","text-color":"primary"}},[t._v("\n          "+t._s(e.value)+"\n      ")])],1)})),1)},C=[],g=(s("3b2b"),s("a481"),s("6762"),s("2fdb"),s("b06b")),_=s("78ba"),x=s("3555"),D={name:"ContactsPopup",props:{contacts:{type:Array,required:!0}},data:function(){return{socialPrefixes:x["e"],socials:x["f"]}},computed:{contactList:function(){var t=this,e=[];return this.contacts.forEach((function(s){var a,n;s&&s.value&&("phone"===s.type||x["g"].includes(s.type)?(e.push({type:"phone",value:"".concat(t.$t(x["e"].phone)).concat(Object(_["c"])(s.value)),link:"".concat(x["d"].phone.call).concat(Object(_["a"])(s.value))}),x["g"].forEach((function(t){a=s.value,n="".concat(x["e"][t]).concat(Object(_["c"])(s.value)),e.push({type:t,value:n,link:"".concat(x["d"][t].text[0]).concat(Object(_["b"])(a))})}))):"email"===s.type?e.push({type:"email",value:s.value,link:"mailto:".concat(s.value)}):x["i"].forEach((function(t){s.type===t&&(a=s.value.replace(new RegExp(x["d"][t].text.join("|")),""),n="".concat(x["e"][t]).concat(a),e.push({type:t,value:n,link:"".concat(x["d"][t].text[0]).concat(Object(_["b"])(a))}))})))})),e}},methods:{call:function(t){Object(g["a"])(t)}}},R=D,$=s("42e1"),w=Object($["a"])(R,v,C,!1,null,null,null),P=w.exports,O=s("b5ae"),T=s("dce2"),k=s("f4f2"),F={pending:"pending",inprogress:"inprogress",completed:"completed",declined:"declined"};function S(t){return t&&t.toLowerCase()===F.pending}function j(t){return t&&t.toLowerCase()!==F.completed}function M(t){return t&&t.toLowerCase()!==F.declined}var I=s("2daf"),E={submittedRequest:"submitted-request",productPurchase:"product-purschase",cartPurchase:"cart-purschase",yandexMoneyFormPurchase:"yandex-money-form-purchase",testPayment:"test-payment"};function N(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function L(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?N(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var A={name:"CompanyClientRequestDetails",mixins:[b["a"]],components:{contactsPopup:P},props:{companyId:{type:[Number,String],required:!0}},data:function(){var t=this,e=T["d"].map((function(e){return{label:t.$t(e.label),value:e.value}})),s=T["c"].map((function(e){return{label:t.$t(e.label),value:e.value}}));return{t:this.$t.bind(this),formModelKey:"companyClientRequestDetails",clientPaymentStatus:I["b"],clientPaymentStatusTitles:I["c"],clientPaymentsStatusesTypes:s,clientRequestStatusesTypes:e,requestTypes:E,socials:x["f"]}},computed:L({},Object(p["c"])("auth",["currentUserIsAdmin","currentUserTimezone"]),{},Object(p["c"])("companyClientsRequest",["companyClientRequestDetails","companyClientRequestUpdateError","isCompanyClientRequestFormVisible","companyClientRequestId"]),{clientRequestName:function(){return this.formModel.type===E.cartPurchase?this.$t("client_request_cart_purchase_label",{num:this.formModel.id}):this.formModel.name},isNotFetched:function(){return!(this.companyClientRequestDetails&&this.companyClientRequestDetails.id)},request:function(){return this.companyClientRequestDetails&&this.companyClientRequestDetails.request?JSON.parse(this.companyClientRequestDetails.request):{}},requestFields:function(){return this.request&&this.request.fields?this.request.fields:[]},requestItems:function(){return this.request&&this.request.items?this.request.items:[]},paymentData:function(){return this.companyClientRequestDetails&&this.companyClientRequestDetails.clientPaymentHistory},hasPaymentBuyerDetails:function(){return this.paymentData&&(this.paymentData.buyerFullName||this.paymentData.buyerInstagram||this.paymentData.buyerEmail||this.paymentData.buyerPhone||this.paymentData.buyerAddress||this.paymentData.buyerComment)},isPurchaseType:function(){return this.formModel.type===E.cartPurchase||this.formModel.type===E.productPurchase||this.formModel.type===E.yandexMoneyFormPurchase},isCartPurchaseType:function(){return this.formModel.type===E.cartPurchase},userSocials:function(){var t=[];return this.formModel.type===E.submittedRequest&&this.requestFields&&this.requestFields.length?this.requestFields.forEach((function(e){e.value&&-1===t.map((function(t){return t.value})).indexOf(e.value)&&t.push({type:e.type,value:e.value})})):this.isPurchaseType&&this.paymentData&&(this.paymentData.buyerEmail&&t.push({type:"email",value:this.paymentData.buyerEmail}),this.paymentData.buyerPhone&&t.push({type:"phone",value:this.paymentData.buyerPhone})),t},hasSocials:function(){return this.userSocials&&this.userSocials.length},hasStatusToggle:function(){return this.canChangeToInprogress||this.canChangeToCompleted||this.canChangeToDeclined},isCreation:function(){return!this.companyClientRequestId},status:{get:function(){return null!==this.formModel?this.formModel.status:null},set:function(t){switch(t){case I["d"].inprogress:this.canChangeToInprogress?(this.formModel.status=t,this.saveChanges()):this.cantChangeStatus();break;case I["d"].completed:this.canChangeToCompleted?(this.formModel.status=t,this.saveChanges()):this.cantChangeStatus();break;case I["d"].declined:this.canChangeToDeclined?(this.formModel.status=t,this.saveChanges()):this.cantChangeStatus();break;default:this.cantChangeStatus();break}o["a"].logEvent("company-client-request-list","change-status",t,0,this.$router.currentRoute)}},isPending:function(){return this.status&&this.status.toLowerCase()===I["d"].pending},statusOptions:function(){return this.isPurchaseType?this.clientPaymentsStatusesTypes:this.clientRequestStatusesTypes},canChangeToInprogress:function(){return this.currentUserIsAdmin&&S(this.status)},canChangeToCompleted:function(){return this.currentUserIsAdmin&&j(this.status)},canChangeToDeclined:function(){return this.currentUserIsAdmin&&M(this.status)}}),mounted:function(){this.fetch()},methods:L({clientRequestStatusFormat:k["a"]},Object(p["d"])("companyClientsRequest",["hideForm","setSelectedId"]),{},Object(p["b"])("companyClientsRequest",["fetchCompanyClientRequestDetails","fetchAllCompanyClientRequestList","updateCompanyClientRequest"]),{getDateLabel:function(){var t="";switch(this.formModel.type){case E.submittedRequest:t=this.$t("client_requests_create_date");break;case E.cartPurchase:case E.productPurchase:case E.yandexMoneyFormPurchase:t=this.$t("client_payments_create_date");break;default:this.$t("client_requests_create_date")}return t},logConnectClient:function(){o["a"].logEvent("company-client-request-list","connect-client",0,0,this.$router.currentRoute)},getErrorMessage:q["a"],fetch:function(){var t=i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.companyClientRequestId){t.next=3;break}return t.next=3,this.fetchCompanyClientRequestDetails({variables:{id:+this.companyClientRequestId}});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveChanges:function(){var t=i()(regeneratorRuntime.mark((function t(){var e,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.companyClientRequestDetails,s=e.id,a=e.comment,n=e.status,t.prev=1,t.next=4,this.updateCompanyClientRequest({variables:{id:s,input:{comment:a,status:n}}});case 4:this.companyClientRequestUpdateError?this.$q.notify({type:"negative",message:this.companyClientRequestUpdateError}):(this.cancel(),this.$q.notify({type:"positive",message:this.$t("client_requests_success_created")}),this.fetchAllCompanyClientRequestList({variables:{companyId:+this.companyId,pageNumber:1,pageSize:1e3,status:[I["d"].pending,I["d"].paid]}})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("client_requests_errors_can_not_save")});case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$v.$reset(),this.hideForm(),this.setSelectedId(null)},cantChangeStatus:function(){this.$q.notify({type:"negative",message:this.$t("appointment_form_errors_can_not_make_action")})}}),validations:{formModel:{name:{required:O["required"]}}}},U=A,z=(s("6a32"),Object($["a"])(U,h,f,!1,null,"c0f96c60",null)),Y=z.exports,H=s("b22d"),J=s("c98f"),V=s("d47e"),B=s("aacf");function K(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function G(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?K(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Q={all:"all",future:"future",past:"past",last7days:"last7days",last30days:"last30days",previousMonth:"previousMonth",currentMonth:"currentMonth",currentYear:"currentYear",customRange:"customRange"},W={name:"CompanyClientRequestList",mixins:[d["a"]],components:{EntityList:y["a"],CompanyClientRequestForm:Y,AddButton:H["a"]},props:{companyId:[Number,String],required:!0},meta:function(){return{title:this.pageTitle}},data:function(){var t=this,e=T["b"].map((function(e){return{label:t.$t(e.label),value:e.value}}));return{searchTerm:"",urls:B["a"],requestTypes:E,clientPaymentStatus:I["b"],clientPaymentStatusTitles:I["c"],timeFilterType:Q.last7days,timeFilterOptions:[{label:this.$t("all"),value:Q.all},{label:this.$t("last_7_days"),value:Q.last7days},{label:this.$t("last_30_days"),value:Q.last30days},{label:this.$t("previous_month"),value:Q.previousMonth},{label:this.$t("current_month"),value:Q.currentMonth},{label:this.$t("current_year"),value:Q.currentYear}],statusFilterType:"all",statusFilterOptions:[{label:this.$t("all"),value:Q.all}].concat(e)}},computed:G({},Object(p["c"])("auth",["currentUserTimezone"]),{},Object(p["c"])("companyClientsRequest",["companyClientRequestList","isCompanyClientRequestFormVisible"]),{},Object(p["c"])("company",["companyTariff","companyDetails"]),{isDateFilterDisabled:function(){return this.companyTariff===J["h"].Free1},pageTitle:function(){var t="";return this.companyDetails&&this.companyDetails.urlPath&&(t=this.companyDetails.urlPath),this.$t("company_requests_page_title",{project:t})}}),watch:{searchTerm:function(){this.filterRequests()}},mounted:function(){this.fetch(),this.trackUserAction({actionName:"openRequestsPage"})},methods:G({clientRequestStatusFormat:k["a"]},Object(p["b"])("companyClientsRequest",["fetchCompanyClientRequestList"]),{},Object(p["b"])("auth",["trackUserAction"]),{onTimeFilterChange:function(t){this.timeFilterType=t,this.filterRequests()},onStatusFilterChange:function(t){this.statusFilterType=t,this.filterRequests()},fetch:function(){var t=i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadRequests();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadRequests:function(){var t=i()(regeneratorRuntime.mark((function t(e,s,a,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={companyId:+this.companyId,pageNumber:1,pageSize:1e3},i={},e&&(r.name=e,i.name=e),s&&(r.startDate=s,i.startDate=s.format(V["K"])),a&&(r.endDate=a,i.endDate=a.format(V["K"])),n&&(r.statuses=[n],i.status=n),t.next=8,this.fetchCompanyClientRequestList({variables:r});case 8:o["a"].logEvent("company-client-request-list","load-requests",JSON.stringify(i),0,this.$router.currentRoute);case 9:case"end":return t.stop()}}),t,this)})));function e(e,s,a,n){return t.apply(this,arguments)}return e}(),filterRequests:function(){var t=i()(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getCalculateDates(),s=this.getCalculateStatus(),a=this.searchTerm||"",t.next=5,this.loadRequests(a,e.startDate,e.endDate,s);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCalculateStatus:function(){return"all"===this.statusFilterType?null:this.statusFilterType},getCalculateDates:function(){var t=m()().subtract(this.pastYears,"year"),e=m()().add(this.futureYears,"year");switch(this.timeFilterType){case Q.future:t=m()(),e=m()().add(this.futureYears,"year");break;case Q.past:t=m()().subtract(this.pastYears,"year"),e=m()();break;case Q.last7days:t=m()().subtract(7,"days"),e=m()();break;case Q.last30days:t=m()().subtract(30,"days"),e=m()();break;case Q.previousMonth:var s=m()().subtract(1,"month");t=s.clone().startOf("month"),e=s.clone().endOf("month");break;case Q.currentMonth:t=m()().startOf("month"),e=m()().endOf("month");break;case Q.currentYear:t=m()().startOf("year"),e=m()().endOf("year");break;case Q.customRange:t=m()(this.startDatePicked),e=m()(this.endDatePicked);break;default:t=null,e=null}return{startDate:t,endDate:e}},setStatusFilter:function(t){this.statusFilterType=t},resetFilters:function(){this.statusFilterType="all"}})},X=W,Z=Object($["a"])(X,a,n,!1,null,null,null);e["default"]=Z.exports},"8022d":function(t,e,s){}}]);
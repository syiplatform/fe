(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{3331:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"row items-stretch",attrs:{padding:""}},[t.pending?a("div",{staticClass:"q-pa-md row col-xs-12 justify-center"},[t.pending?a("q-spinner",{attrs:{size:40,color:"info"}}):t._e()],1):t._e(),t.pending?t._e():a("q-card",{staticClass:"row col-xs-12 q-my-xs items-start content-start bg-transparent",attrs:{flat:""}},[!t.isPaymentsSettingsDisabled||t.activatedPaymentList&&t.activatedPaymentList.length?t._e():a("q-card-section",{staticClass:"row col-xs-12 q-px-lg"},[a("q-banner",{staticClass:"col-xs-12 q-mb-md bg-warning cursor-pointer text-white border-radius",nativeOn:{click:function(e){return t.openTariffs(e)}},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"warning",color:"white"}})]},proxy:!0}],null,!1,894313219)},[t._v("\n          "+t._s(t.$t("landing_tariff_large_1"))+"\n        ")])],1),a("q-card-section",[a("q-btn",{attrs:{rounded:"",label:t.$t("company_payment_test"),disable:t.isPaymentsSettingsDisabled||!t.activatedPaymentList||!t.activatedPaymentList.length,color:"secondary"},on:{click:t.testPayment}}),!t.isPaymentsSettingsDisabled&&t.activatedPaymentList&&t.activatedPaymentList.length?a("q-icon",{staticClass:"q-ml-sm",attrs:{name:"help_outline",size:"20px",color:"secondary"}},[a("q-tooltip",{attrs:{"content-class":"text-body2",anchor:"bottom right",self:"center right",offset:[10,10]}},[a("p",[t._v(t._s(t.$t("company_payment_test_helper")))])])],1):t._e()],1),a("q-card-section",{staticClass:"row col-xs-12",class:t.$q.screen.lt.sm?"q-px-xs":"q-px-md"},[t.activatedPaymentList&&t.activatedPaymentList.length?a("div",{staticClass:"col-xs-12 text-subtitle2 text-secondary",class:t.$q.screen.lt.sm?"text-center q-px-xs":"q-px-sm"},[t._v("\n        "+t._s(t.$t("company_payment_connected_systems"))+":\n      ")]):t._e(),t.isPaymentsSettingsDisabled&&t.activatedPaymentList&&t.activatedPaymentList.length?a("q-banner",{staticClass:"col-xs-12 bg-warning cursor-pointer text-white border-radius",nativeOn:{click:function(e){return t.openTariffs(e)}},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"warning",color:"white"}})]},proxy:!0}],null,!1,894313219)},[t._v("\n        "+t._s(t.$t("landing_tariff_large_1_payments"))+"\n      ")]):t._e(),t._l(t.activatedPaymentList,(function(e){return a("div",{key:"activated-"+e.type,staticClass:"col-xs-6 col-sm-auto q-px-xs q-py-md"},[a("q-card",{staticClass:"cursor-pointer"},[a("q-card-section",{staticClass:"q-pa-md row justify-center",on:{click:function(a){!t.isPaymentsSettingsDisabled&&!t.loading&&t.openForm(e.type,e.id)}}},[a("img",{attrs:{height:"100px",src:"/statics/payments/"+e.type+".png"}})]),a("q-card-section",[a("div",{staticClass:"text-center text-subtitle2"},[t._v("\n              "+t._s(t.$t(t.paymentSystemLabels[e.type]))+"\n            ")]),a("div",{staticClass:"row col-xs-12 justify-center q-mt-xs"},[a("span",{staticClass:"q-mr-xs"},[t._v("\n                "+t._s(t.$t("payments_commission"))+"\n              ")]),e.type===t.paymentSystemTypes.yandexmoney?a("q-icon",{attrs:{name:"help_outline",size:"20px",color:"grey"}},[a("q-tooltip",{attrs:{"content-class":"text-body2",anchor:"bottom right",self:"center right",offset:[10,10]}},[a("p",[t._v(t._s(t.$t("yandex_money_wallet"))+".\n                   "+t._s(t.$t("yandex_money_wallet_description")))]),a("p",[t._v(t._s(t.$t("yandex_money_card"))+".\n                    "+t._s(t.$t("yandex_money_card_description")))])])],1):t._e(),e.type===t.paymentSystemTypes.yandexkassa?a("q-icon",{attrs:{name:"help_outline",size:"20px",color:"grey"},nativeOn:{click:function(e){return t.openYandexKassaHelper(e)}}}):t._e(),e.type===t.paymentSystemTypes.tinkoff?a("q-icon",{attrs:{name:"help_outline",size:"20px",color:"grey"},nativeOn:{click:function(e){return t.openTinkoffHelper(e)}}}):t._e()],1)]),a("q-card-section",{staticClass:"row q-px-xs"},t._l(t.paymentOptions[e.type],(function(s){var n;return a("q-card",{key:s.type+"-"+e.type,staticClass:"col-xs-6 col-sm-auto justify-center overflow-hidden",attrs:{flat:"",bordered:!1},on:{click:function(a){!t.isPaymentsSettingsDisabled&&!t.loading&&t.togglePaymentMethod(e.id,s.type,e[s.type])}}},[a("q-card-section",{staticClass:"paymentMethodLogo no-padding",class:(n={},n[s.type+"Logo"]=!0,n["active"]=e[s.type],n)},[a("q-tooltip",{staticClass:"gt-xs"},[t._v(t._s(t.$t(s.label)))]),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner-dots",{attrs:{size:"25px",color:"primary"}})],1)],1),a("q-card-section",{staticClass:"lt-sm text-center no-padding payment-method-label"},[t._v("\n                "+t._s(t.$t(s.label))+"\n              ")])],1)})),1),a("q-card-section",{staticClass:"text-center"},[a("q-btn",{attrs:{rounded:"",label:t.$t("open_instruction"),color:"info"},on:{click:function(a){return a.stopPropagation(),t.openInstruction(e.type)}}})],1),a("q-btn",{staticClass:"absolute-top-right q-mt-md q-mx-sm",attrs:{icon:"clear",dense:""},on:{click:function(a){!t.isPaymentsSettingsDisabled&&!t.loading&&t.deactivate(e.type,e.id)}}}),"testing"===e.operationMode?a("q-badge",{attrs:{color:"info",floating:""}},[t._v("\n            "+t._s(t.$t("test_text"))+"\n          ")]):t._e()],1)],1)})),t.availablePaymentList&&t.availablePaymentList.length?a("div",{staticClass:"col-xs-12 text-subtitle2 text-secondary q-pt-md",class:t.$q.screen.lt.sm?"text-center q-px-xs":"q-px-sm"},[t._v("\n        "+t._s(t.$t("payment_systems_available"))+":\n      ")]):t._e(),t._l(t.availablePaymentList,(function(e){return a("div",{key:e.type,staticClass:"col-xs-6 col-sm-3 col-xl-2 q-px-xs q-py-md"},[a("q-card",{staticClass:"cursor-pointer column full-height",class:{"light-dimmed":t.isPaymentsSettingsDisabled},on:{click:function(a){!t.isPaymentsSettingsDisabled&&!t.loading&&!e.soon&&t.openForm(e.type,e.id)}}},[a("q-card-section",{staticClass:"col-xs-auto q-pa-md row justify-center"},[a("img",{attrs:{height:"100px",src:"/statics/payments/"+e.type+".png"}})]),a("q-card-section",{staticClass:"col row items-stretch"},[a("div",{staticClass:"col-xs-12 text-center text-subtitle2"},[t._v("\n              "+t._s(t.$t(t.paymentSystemLabels[e.type]))+"\n            ")]),a("div",{staticClass:"col-xs-12 row"},[a("div",{staticClass:"col-xs-12 col-sm text-subtitle2",class:t.$q.screen.lt.sm?"text-center":"text-right"},[t._v("\n                "+t._s(t.$t("payment_for_owner"))+"\n              ")]),a("div",{staticClass:"q-pl-sm col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"text-center":""},t._l(t.paymentOwnerOptions[e.type],(function(s){return a("div",{key:e.type+"-"+s},[t._v("\n                  "+t._s(t.$t("payment_owner_"+s))+"\n                ")])})),0)]),a("div",{staticClass:"col-xs-12 row text-center items-end"},[a("q-btn",{staticClass:"col-xs-12",class:t.$q.screen.lt.sm?"q-mt-sm":"q-mt-md",attrs:{rounded:"",label:t.$t("open_instruction"),color:"info"},on:{click:function(a){return a.stopPropagation(),t.openInstruction(e.type)}}})],1)]),e.soon&&!t.isPaymentsSettingsDisabled?a("q-badge",{attrs:{color:"warning",floating:""}},[t._v("\n            "+t._s(t.$t("soon_text"))+"\n          ")]):t._e()],1)],1)}))],2)],1),a("company-payment-form",{attrs:{companyId:t.companyId}})],1)},n=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("96cf"),a("c973")),r=a.n(o),i=a("448a"),c=a.n(i),m=a("9523"),l=a.n(m),p=(a("c5f6"),a("1cb6")),y=a("b06b"),d=a("2f62"),u=a("c98f"),f=a("d59f"),_=a("f2a3"),h=a("7d35"),b=a("ee47"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.isCompanyPaymentFormVisible,maximized:t.$q.screen.lt.sm,"content-class":"payment-form"},on:{"before-hide":t.cancel}},[a("q-layout",{staticClass:"bg-white",attrs:{view:"hhh lpr fFf",container:""}},[a("q-page-container",[a("q-page",{staticClass:"bg-white q-pa-lg"},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"info"}})],1),a("q-item-section",{staticClass:"text-h5"},[t._v("\n            "+t._s(t.$t(t.paymentSystemLabels[t.companyPaymentType]))+"\n          ")])],1),t.companyPaymentType===t.paymentSystemTypes.yandexmoney?a("q-banner",{staticClass:"bg-warning text-white border-radius",scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"info",color:"white"}})]},proxy:!0}],null,!1,654320519)},[t._v("\n          "+t._s(t.$t("payment_form_yandex_money_rub"))+"!\n        ")]):t._e(),t.companyPaymentType===t.paymentSystemTypes.robokassa?a("q-banner",{staticClass:"bg-warning text-white border-radius",scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"info",color:"white"}})]},proxy:!0}],null,!1,654320519)},[t._v("\n          "+t._s(t.$t("payment_form_robokassa_currency"))+"!\n        ")]):t._e(),a("q-list",{staticClass:"row"},[t.paymentSystemRegLink[t.companyPaymentType]&&t.paymentSystemRegLink[t.companyPaymentType].url?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[t._v("\n                "+t._s(t.$t("payment_form_register"))+"\n                "),a("a",{attrs:{href:t.paymentSystemRegLink[t.companyPaymentType].url,target:"_blank"}},[t._v("\n                  "+t._s(t.paymentSystemRegLink[t.companyPaymentType].title)+"\n                ")]),t._v(",\n                "+t._s(t.$t("payment_form_not_register"))+"\n              ")])],1)],1):t._e(),t.isFieldVisible("yandexmoneyNotification")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[t._v(t._s(t.$t("payment_form_link_wallet")))]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("yandex_money_account_number"),type:"number",maxlength:"20","bottom-slots":"",error:t.$v.formModel.yandexMoneyWalletNumber.$error,"error-message":t.getErrorMessage(t.$v.formModel.yandexMoneyWalletNumber,t.t)},model:{value:t.formModel.yandexMoneyWalletNumber,callback:function(e){t.$set(t.formModel,"yandexMoneyWalletNumber","string"===typeof e?e.trim():e)},expression:"formModel.yandexMoneyWalletNumber"}}),a("q-item-label",[t._v("\n                "+t._s(t.$t("payment_form_yandex_money_line1"))+"\n                "),a("a",{attrs:{href:"https://yoomoney.ru/transfer/myservices/http-notification",target:"_blank"}},[t._v("\n                "+t._s(t.$t("payment_form_yandex_money_line2"))+"\n                ")]),t._v("\n                "+t._s(t.$t("payment_form_yandex_money_line3"))+":\n              ")]),a("q-input",{ref:"paymentResultURL",staticClass:"q-mt-sm",attrs:{filled:"",value:t.yandexMoneyHttpNotificationLink,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("paymentResultURL")}}})]},proxy:!0}],null,!1,4050373780)}),a("q-item-label",{staticClass:"q-mt-md"},[t._v(t._s(t.$t("payment_form_secret_key"))+":")]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_secret"),maxlength:"24","bottom-slots":""},model:{value:t.formModel.httpNotificationSecret,callback:function(e){t.$set(t.formModel,"httpNotificationSecret","string"===typeof e?e.trim():e)},expression:"formModel.httpNotificationSecret"}})],1)],1):t._e(),t.isFieldVisible("yandexkassaNotification")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[a("a",{attrs:{href:"https://yookassa.ru/my/shop-settings",target:"_blank"}},[t._v("\n                "+t._s(t.$t("payment_form_in_settings")))]),t._v(" "+t._s(t.$t("payment_form_select_method"))+"\n              ")]),a("q-item-label",[a("a",{attrs:{href:"https://yookassa.ru/my/merchant/integration/http-notifications",target:"_blank"}},[t._v("\n                "+t._s(t.$t("payment_form_in_settings")))]),t._v(" "+t._s(t.$t("payment_form_specify_url"))+":\n              ")]),a("q-input",{ref:"paymentyandexkassaResultURL",staticClass:"q-mt-sm",attrs:{filled:"",value:t.yandexKassaHttpNotificationLink,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("paymentyandexkassaResultURL")}}})]},proxy:!0}],null,!1,2575764048)}),a("q-item-label",{staticClass:"q-pt-md"},[t._v("\n                "+t._s(t.$t("payment_form_enter_got"))+"\n                "),a("a",{attrs:{href:"https://yookassa.ru/my/merchant/integration/api-keys",target:"_blank"}},[t._v(t._s(t.$t("payment_form_here")))]),t._v("\n                "+t._s(t.$t("payment_form_secret_key_text"))+"\n              ")]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_secret"),"bottom-slots":"",error:t.$v.formModel.yandexKassaSecret.$error,"error-message":t.getErrorMessage(t.$v.formModel.yandexKassaSecret,t.t)},model:{value:t.formModel.yandexKassaSecret,callback:function(e){t.$set(t.formModel,"yandexKassaSecret","string"===typeof e?e.trim():e)},expression:"formModel.yandexKassaSecret"}}),a("q-item-label",[t._v("\n                "+t._s(t.$t("payment_form_enter_got"))+"\n                "),a("a",{attrs:{href:"https://yookassa.ru/my/shop-settings",target:"_blank"}},[t._v(t._s(t.$t("payment_form_here")))]),t._v("\n                shopId\n              ")]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_shop_id"),type:"number","bottom-slots":"",error:t.$v.formModel.yandexKassaShopId.$error,"error-message":t.getErrorMessage(t.$v.formModel.yandexKassaShopId,t.t)},model:{value:t.formModel.yandexKassaShopId,callback:function(e){t.$set(t.formModel,"yandexKassaShopId","string"===typeof e?e.trim():e)},expression:"formModel.yandexKassaShopId"}})],1)],1):t._e(),t.isFieldVisible("tinkoffNotification")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[a("a",{attrs:{href:"https://business.tinkoff.ru/oplata/mpa/merchant/eacq",target:"_blank"}},[t._v("\n                "+t._s(t.$t("payment_form_terminal_settings")))]),t._v("\n                "+t._s(t.$t("payment_form_tinkoff_payment_method"))+"\n              ")]),a("q-input",{ref:"paymentTinkoffResultURL",staticClass:"q-mt-sm",attrs:{filled:"",value:t.tinkoffHttpNotificationLink,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("paymentTinkoffResultURL")}}})]},proxy:!0}],null,!1,4150012067)}),a("q-item-label",{staticClass:"q-pt-md"},[t._v("\n                "+t._s(t.$t("payment_form_enter_got"))+"\n                "+t._s(t.$t("payment_form_terminal_key_text"))+"\n              ")]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_terminal"),"bottom-slots":"",error:t.$v.formModel.tinkoffOplataTerminal.$error,"error-message":t.getErrorMessage(t.$v.formModel.tinkoffOplataTerminal,t.t)},model:{value:t.formModel.tinkoffOplataTerminal,callback:function(e){t.$set(t.formModel,"tinkoffOplataTerminal","string"===typeof e?e.trim():e)},expression:"formModel.tinkoffOplataTerminal"}}),a("q-item-label",[t._v("\n                "+t._s(t.$t("payment_form_enter_got"))+"\n                "+t._s(t.$t("payment_form_password_key_text"))+"\n              ")]),a("q-input",{attrs:{filled:"",label:t.$t("payment_system_password"),"bottom-slots":"",error:t.$v.formModel.tinkoffOplataPassword.$error,"error-message":t.getErrorMessage(t.$v.formModel.tinkoffOplataPassword,t.t)},model:{value:t.formModel.tinkoffOplataPassword,callback:function(e){t.$set(t.formModel,"tinkoffOplataPassword","string"===typeof e?e.trim():e)},expression:"formModel.tinkoffOplataPassword"}})],1)],1):t._e(),t.isFieldVisible("robokassaNotification")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs q-mb-sm"},[t._v("\n                "+t._s(t.$t("payment_form_specify_settings"))+"\n              ")]),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_robokassa_shop_id"),hint:t.$t("payment_system_robokassa_shop_id_helper"),"bottom-slots":"",error:t.$v.formModel.robokassaShopId.$error,"error-message":t.getErrorMessage(t.$v.formModel.robokassaShopId,t.t)},model:{value:t.formModel.robokassaShopId,callback:function(e){t.$set(t.formModel,"robokassaShopId","string"===typeof e?e.trim():e)},expression:"formModel.robokassaShopId"}}),a("select-input",{staticClass:"q-mt-sm",attrs:{label:t.$t("payment_system_password_algorithm"),model:t.formModel.rokokassaPasswordAlgorithm,options:t.robokassaPasswordAlgorithmOptions,onInput:function(e){return t.formModel.rokokassaPasswordAlgorithm=e}}}),a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_password1"),hint:t.$t("payment_system_password1_helper"),"bottom-slots":"",error:t.$v.formModel.robokassaPassword1.$error,"error-message":t.getErrorMessage(t.$v.formModel.robokassaPassword1,t.t)},model:{value:t.formModel.robokassaPassword1,callback:function(e){t.$set(t.formModel,"robokassaPassword1","string"===typeof e?e.trim():e)},expression:"formModel.robokassaPassword1"}}),a("q-input",{attrs:{filled:"",label:t.$t("payment_system_password2"),hint:t.$t("payment_system_password2_helper"),"bottom-slots":"",error:t.$v.formModel.robokassaPassword2.$error,"error-message":t.getErrorMessage(t.$v.formModel.robokassaPassword2,t.t)},model:{value:t.formModel.robokassaPassword2,callback:function(e){t.$set(t.formModel,"robokassaPassword2","string"===typeof e?e.trim():e)},expression:"formModel.robokassaPassword2"}}),a("q-input",{ref:"rkResultURL",staticClass:"q-mt-sm",attrs:{filled:"",label:"Result URL:",value:"https://api.seeyour.info/payment-systems/robokassa",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("rkResultURL")}}})]},proxy:!0}],null,!1,1048706391)}),a("q-input",{ref:"rkSuccessURL",staticClass:"q-mt-sm",attrs:{filled:"",label:"Success URL:",value:"https://seeyour.info/payment-systems/robokassa-success",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("rkSuccessURL")}}})]},proxy:!0}],null,!1,1487901245)}),a("q-input",{ref:"rkFailURL",staticClass:"q-mt-sm",attrs:{filled:"",label:"Fail URL:",value:"https://seeyour.info/payment-systems/robokassa-fail",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("rkFailURL")}}})]},proxy:!0}],null,!1,3380564540)}),a("q-item-label",{staticClass:"q-mt-md q-mb-sm q-pa-sm bg-info"},[t._v("\n                "+t._s(t.$t("payment_form_get_method"))+"\n              ")])],1)],1):t._e(),t.isFieldVisible("useAsOnlineKassa")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[t._v(t._s(t.$t("payment_form_online_kassa")))]),a("q-toggle",{attrs:{label:t.$t("payment_form_use_online_kassa"),color:"primary"},model:{value:t.formModel.useAsOnlineKassa,callback:function(e){t.$set(t.formModel,"useAsOnlineKassa",e)},expression:"formModel.useAsOnlineKassa"}})],1)],1):t._e(),t.isFieldVisible("paypalBusinessAccount")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-input",{staticClass:"q-mt-sm",attrs:{filled:"",label:t.$t("payment_system_paypal_email"),"bottom-slots":"",error:t.$v.formModel.paypalBusinessAccount.$error,"error-message":t.getErrorMessage(t.$v.formModel.paypalBusinessAccount,t.t)},model:{value:t.formModel.paypalBusinessAccount,callback:function(e){t.$set(t.formModel,"paypalBusinessAccount","string"===typeof e?e.trim():e)},expression:"formModel.paypalBusinessAccount"}})],1)],1):t._e(),t.isFieldVisible("paypalNotification")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",[a("a",{attrs:{href:"https://www.paypal.com/cgi-bin/customerprofileweb?cmd=_profile-ipn-notify",target:"_blank"}},[t._v("\n                "+t._s(t.$t("payment_form_in_settings")))]),t._v(" "+t._s(t.$t("payment_form_specify_url"))+":\n              ")]),a("q-input",{ref:"paymentpaypalResultURL",staticClass:"q-mt-sm",attrs:{filled:"",value:t.paypalHttpNotificationLink,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"file_copy",color:"primary"},on:{click:function(e){return t.copyToClipBoard("paymentpaypalResultURL")}}})]},proxy:!0}],null,!1,368619649)})],1)],1):t._e(),t.isFieldVisible("operationMode")?a("q-item",{staticClass:"col-xs-12  items-start"},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"lens",color:"secondary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-xs"},[t._v("\n                "+t._s(t.$t("payment_form_after_test_payment"))+"\n              ")]),a("q-option-group",{attrs:{options:t.paymentSystemModeOptions,color:"primary"},model:{value:t.formModel.operationMode,callback:function(e){t.$set(t.formModel,"operationMode",e)},expression:"formModel.operationMode"}})],1)],1):t._e()],1)],1)],1),a("q-footer",{staticClass:"bg-white row q-py-sm q-px-md"},[a("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"order-last":"q-mr-sm",attrs:{rounded:"",label:t.$t("action_cancel"),color:"secondary",icon:"arrow_back"},on:{click:t.cancel}}),a("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"q-mb-sm":"q-mr-sm",attrs:{rounded:"",label:t.$t(t.isCreation?"action_create":"action_save"),color:"primary",icon:t.isCreation?"add":"save"},on:{click:t.saveChanges}})],1)],1)],1)},v=[],q=(a("6762"),a("2fdb"),a("11ec")),k=a("aacf"),x=a("b5ae"),P=a("5944");function $(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?$(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"CompanyPaymentForm",mixins:[P["a"]],props:{companyId:{type:[Number,String],required:!0}},data:function(){var t=this,e=_["e"].map((function(e){return{label:t.$t(e.label),value:e.value}}));return{t:this.$t.bind(this),paymentSystemLabels:_["d"],paymentSystemRegLink:_["g"],paymentSystemModeOptions:e,paymentOptions:_["a"],paymentSystemTypes:_["h"],robokassaCommissionTargetOptions:_["j"],robokassaPasswordAlgorithmOptions:_["k"],formModelKey:"companyPaymentDetails"}},computed:C({},Object(d["c"])("companyPayment",["paymentList","companyPaymentCreateError","companyPaymentUpdateError","companyPaymentDetails","companyPaymentId","companyPaymentType","isCompanyPaymentFormVisible"]),{isCreation:function(){return!this.companyPaymentId},yandexMoneyHttpNotificationLink:function(){return"".concat(k["a"].apiUrl,"/payment-systems/yoomoney")},yandexKassaHttpNotificationLink:function(){return"".concat(k["a"].apiUrl,"/payment-systems/yookassa")},tinkoffHttpNotificationLink:function(){return"".concat(k["a"].apiUrl,"/payment-systems/tinkoff")},paypalHttpNotificationLink:function(){return"".concat(k["a"].apiUrl,"/payment-systems/paypal")}}),watch:{isCompanyPaymentFormVisible:function(t){this.fetchCompanyPaymentDetails({variables:{id:+this.companyPaymentId},type:this.companyPaymentType}),t&&this.trackUserAction({actionName:"openPaymentSystemDialog"})}},methods:C({},Object(d["b"])("auth",["trackUserAction"]),{},Object(d["d"])("companyPayment",["hideForm","setSelectedId"]),{},Object(d["b"])("companyPayment",["fetchCompanyPaymentDetails","createCompanyPayment","updateCompanyPayment"]),{getErrorMessage:f["a"],isFieldVisible:function(t){return _["c"][this.companyPaymentType]&&_["c"][this.companyPaymentType].includes(t)},createNewCompanyPayment:function(){var t=r()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.createPaymentData(!0),t.prev=1,t.next=4,this.createCompanyPayment({variables:{input:C({companyId:+this.companyId},e)}});case 4:this.companyPaymentCreateError?this.$q.notify({type:"negative",message:this.companyPaymentCreateError}):(this.trackUserAction({actionName:"updatePaymentSystem"}),this.cancel(),this.$q.notify({type:"positive",message:this.$t("companyPayment_form_success_created")}),p["a"].logEvent("companyPayments-page","create-companyPayment",this.companyId,0,this.$router.currentRoute)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("companyPayment_form_errors_can_not_save")});case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}(),editCompanyPayment:function(){var t=r()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.createPaymentData(!1),t.prev=1,t.next=4,this.updateCompanyPayment({variables:{id:this.companyPaymentId,input:C({companyId:+this.companyId},e)}});case 4:this.companyPaymentUpdateError?this.$q.notify({type:"negative",message:this.companyPaymentUpdateError}):(this.trackUserAction({actionName:"updatePaymentSystem"}),this.cancel(),this.$q.notify({type:"positive",message:this.$t("companyPayment_form_success_updated")}),p["a"].logEvent("my-companyPayments-page","edit-companyPayment",this.companyId,0,this.$router.currentRoute)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("companyPayment_form_errors_can_not_save")});case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}(),saveChanges:function(){var t=r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.validateFormAndNotify()){t.next=2;break}return t.abrupt("return");case 2:this.isCreation?this.createNewCompanyPayment():this.editCompanyPayment();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createPaymentData:function(t){var e=!this.paymentList||!this.paymentList.filter((function(t){return t.isActive})).length,a=this.formModel,s={type:a.type||this.companyPaymentType,isActive:!0};switch(this.companyPaymentType){case _["h"].yandexmoney:Object(q["a"])(s,{yandexMoneyWalletNumber:a.yandexMoneyWalletNumber,httpNotificationSecret:a.httpNotificationSecret,paymentMethodBankCard:t?e:a.paymentMethodBankCard,paymentMethodYandexmoney:t?e:a.paymentMethodYandexmoney});break;case _["h"].yandexkassa:Object(q["a"])(s,{yandexKassaSecret:a.yandexKassaSecret,yandexKassaShopId:a.yandexKassaShopId,useAsOnlineKassa:a.useAsOnlineKassa,operationMode:a.operationMode,paymentMethodBankCard:t?e:a.paymentMethodBankCard,paymentMethodYandexmoney:t?e:a.paymentMethodYandexmoney});break;case _["h"].tinkoff:Object(q["a"])(s,{tinkoffOplataTerminal:a.tinkoffOplataTerminal,tinkoffOplataPassword:a.tinkoffOplataPassword,useAsOnlineKassa:a.useAsOnlineKassa,operationMode:a.operationMode,paymentMethodBankCard:t?e:a.paymentMethodBankCard});break;case _["h"].robokassa:Object(q["a"])(s,{robokassaShopId:a.robokassaShopId,rokokassaPasswordAlgorithm:a.rokokassaPasswordAlgorithm,robokassaPassword1:a.robokassaPassword1,robokassaPassword2:a.robokassaPassword2,robokassaCommissionTarget:a.robokassaCommissionTarget,operationMode:a.operationMode,paymentMethodBankCard:t?e:a.paymentMethodBankCard});break;case _["h"].paypal:Object(q["a"])(s,{paypalBusinessAccount:a.paypalBusinessAccount,paymentMethodBankCard:t?e:a.paymentMethodBankCard,paymentMethodPaypal:t?e:a.paymentMethodPaypal,operationMode:"production"});break;default:return{}}return s},cancel:function(){this.$v.$reset(),this.setSelectedId(null),this.hideForm()},copyToClipBoard:function(t){var e=this.$refs[t];e.select(),document.execCommand("copy"),this.$q.notify({type:"positive",message:this.$t("url_was_copied")})}}),validations:function(){var t={formModel:{}};switch(this.companyPaymentType){case _["h"].yandexmoney:t.formModel={yandexMoneyWalletNumber:{required:x["required"],numeric:x["numeric"],minLength:Object(x["minLength"])(11),maxLength:Object(x["maxLength"])(20)}};break;case _["h"].yandexkassa:t.formModel={yandexKassaSecret:{required:x["required"]},yandexKassaShopId:{required:x["required"],numeric:x["numeric"]}};break;case _["h"].tinkoff:t.formModel={tinkoffOplataTerminal:{required:x["required"]},tinkoffOplataPassword:{required:x["required"]}};break;case _["h"].robokassa:t.formModel={robokassaShopId:{required:x["required"]},robokassaPassword1:{required:x["required"]},robokassaPassword2:{required:x["required"]}};break;case _["h"].paypal:t.formModel={paypalBusinessAccount:{email:x["email"],required:x["required"]}};break;default:break}return t}},M=w,O=(a("534b"),a("42e1")),S=Object(O["a"])(M,g,v,!1,null,null,null),L=S.exports;function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function R(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={name:"CompanyPayments",mixins:[b["a"]],props:{companyId:{type:[Number,String]}},components:{EntityList:h["a"],CompanyPaymentForm:L},meta:function(){return{title:this.pageTitle}},data:function(){return{t:this.$t.bind(this),paymentOwnerOptions:_["b"],paymentSystemOptions:_["f"],paymentSystemLabels:_["d"],paymentSystemTypes:_["h"],paymentOptions:_["a"],loading:!1,pending:!1}},computed:R({},Object(d["c"])("company",["companyDetails","companyTariff"]),{},Object(d["c"])("companyPayment",["paymentList","companyPaymentDeactivateError"]),{pageTitle:function(){var t="";return this.companyDetails&&(t=this.companyDetails.urlPath),this.$t("company_payment_system_page_title",{project:t})},isNotFetched:function(){return!0},isPaymentsSettingsDisabled:function(){return this.companyTariff!==u["h"].Large1},activatedPaymentList:function(){return this.paymentList.filter((function(t){return t.isActive}))},disactivatedPaymentList:function(){return this.paymentList.filter((function(t){return!t.isActive}))},availablePaymentList:function(){var t=this,e=_["f"].filter((function(e){return-1===t.paymentList.map((function(t){return t.type})).indexOf(e.type)}));return this.disactivatedPaymentList&&this.disactivatedPaymentList.length&&e.unshift.apply(e,c()(this.disactivatedPaymentList)),e}}),mounted:function(){this.trackUserAction({actionName:"openPaymentSystemsPage"})},methods:R({},Object(d["b"])("auth",["trackUserAction"]),{},Object(d["b"])("company",["fetchIndividualCompanyDetails"]),{},Object(d["b"])("companyPayment",["fetchCompanyPaymentList","updatePaymentMethod","deactivateCompanyPayment","createTestClientPayment"]),{},Object(d["d"])("companyPayment",["setSelectedId","setSelectedType","showForm"]),{getErrorMessage:f["a"],fetch:function(){var t=r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.pending=!0,t.next=3,this.fetchIndividualCompanyDetails({variables:{id:this.companyId}});case 3:return t.next=5,this.fetchCompanyPaymentList({variables:{companyId:this.companyId}});case 5:this.pending=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openForm:function(t,e){e&&this.setSelectedId(e),t&&this.setSelectedType(t),this.showForm()},togglePaymentMethod:function(){var t=r()(regeneratorRuntime.mark((function t(e,a,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.updatePaymentMethod({variables:{paymentSystemId:e,paymentMethodName:a,paymentMethodEnabled:!s}});case 3:this.loading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(e,a,s){return t.apply(this,arguments)}return e}(),deactivate:function(t,e){var a=this;this.$q.dialog({message:"".concat(this.$t("payment_system_deactivate_message")," ").concat(this.$t(_["d"][t]),"?"),ok:this.$t("Yes"),cancel:this.$t("No")}).onOk(r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.deactivateCompanyPayment({variables:{paymentSystemId:e,isActive:!1}});case 3:a.companyPaymentDeactivateError?a.$q.notify({type:"negative",message:a.companyPaymentDeactivateError}):a.$q.notify({type:"positive",message:a.$t("companyPayment_form_success_deactivate")}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),a.$q.notify({type:"negative",message:a.$t("companyPayment_form_errors_can_not_deactivate")});case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))))},openTariffs:function(){p["a"].logEvent("company-tariffs-page","company-payments-page","",0,this.$router.currentRoute),this.$router.push({name:"tariffs",params:{companyId:this.companyId}})},openYandexKassaHelper:function(){p["a"].logEvent("company-payments-page","go-to-yandex-kassa","",0,this.$router.currentRoute),Object(y["a"])("https://yookassa.ru/my/agreement")},openTinkoffHelper:function(){p["a"].logEvent("company-payments-page","go-to-tinkoff","",0,this.$router.currentRoute),Object(y["a"])("https://oplata.tinkoff.ru/tariff/")},openInstruction:function(t){var e=t;"tinkoff"===e&&(e="tinkoff-oplata"),window.open("https://seeyour.info/blog/ru/baza-znanij/payment-system-".concat(e,"/"),"_blank"),p["a"].logEvent("company-payments-page","open-instruction",t,0,this.$router.currentRoute),this.trackUserAction({actionName:"openPaymentSystemInstruction"})},testPayment:function(){var t=r()(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return p["a"].logEvent("company-payments-page","test-payment-click","",0,this.$router.currentRoute),this.trackUserAction({actionName:"testPaymentClick"}),t.prev=2,t.next=5,this.createTestClientPayment({variables:{companyId:+this.companyId,price:3,currency:"RUB"}});case 5:e=t.sent,this.clientPaymentTestCreateError?this.$q.notify({type:"negative",message:this.clientPaymentTestCreateError}):this.$router.push({name:"client-payment",params:{path:this.companyDetails.urlPath,paymentUid:e}}),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),this.loading=!1,this.$q.notify({type:"negative",message:this.$t("common_error")});case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(){return t.apply(this,arguments)}return e}()})},I=j,N=(a("405e"),Object(O["a"])(I,s,n,!1,null,"7712253b",null));e["default"]=N.exports},3826:function(t,e,a){},"405e":function(t,e,a){"use strict";var s=a("df13"),n=a.n(s);n.a},"534b":function(t,e,a){"use strict";var s=a("3826"),n=a.n(s);n.a},df13:function(t,e,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{6175:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("q-card",{staticClass:"border-radius q-mb-md bg-white"},[r("div",{staticClass:"row q-pa-md q-mb-xs"},[r("q-input",{staticClass:"col q-mr-lg",attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",debounce:100,placeholder:t.$t("client_search_placeholder"),color:"secondary",icon:"search"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),r("div",{staticClass:"col-xs-auto"},[r("add-button",{attrs:{namespace:"client"}})],1)],1)]),r("q-card",{staticClass:"border-radius q-mb-md bg-white"},[t.filteredClentList&&t.filteredClentList.length?r("entity-list",{attrs:{list:t.filteredClentList,isPossibleToOpenDetailsPage:!0,isPossibleToOpenDetails:!1,isPossibleToConfirm:!0,isPossibleToDelete:!0,namespace:"client"},scopedSlots:t._u([{key:"title",fn:function(e){var n=e.entity;return[r("div",{staticClass:"row col-xs-12 items-center"},[r("q-btn",{staticClass:"q-mr-md",attrs:{icon:"person",size:"14px",color:n.sex?"secondary":"primary",round:"",to:{name:"client-details",params:{companyId:t.companyId,clientId:n.id}}}}),r("span",[t._v(t._s(n.firstName)+" "+t._s(n.lastName)+" ")])],1)]}}],null,!1,2209594892)}):r("q-banner",{staticClass:"bg-info q-my-sm text-white border-radius",scopedSlots:t._u([{key:"avatar",fn:function(){return[r("q-icon",{attrs:{name:"info",color:"white"}})]},proxy:!0}])},[t._v("\n        "+t._s(t.$t("client_list_empty_message"))+"\n      ")]),t.companyId?r("company-client-form",{attrs:{companyId:t.companyId}}):t._e()],1)],1)},s=[],a=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("96cf"),r("c973")),i=r.n(a),c=(r("f559"),r("9523")),o=r.n(c),l=(r("c5f6"),r("2f62")),u=r("ee47"),p=r("b6a6"),d=r("42f8"),m=r("b22d"),f=r("2ad6"),h=function(t){switch(t.toLowerCase()){case f["a"].pending:return"client_status_pending";case f["a"].confirmed:return"client_status_confirmed";case f["a"].declined:return"client_status_declined";default:return""}},b=r("c5e0");function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C={name:"CompanyClientBase",mixins:[u["a"]],components:{EntityList:p["a"],CompanyClientForm:d["a"],AddButton:m["a"]},props:{companyId:[Number,String],required:!0},meta:function(){return{title:this.pageTitle}},data:function(){return{formModelKey:"clientDetails",searchTerm:""}},computed:w({},Object(l["c"])("client",["clientList"]),{},Object(l["c"])("company",["companyDetails"]),{pageTitle:function(){var t="";return this.companyDetails&&this.companyDetails.urlPath&&(t=this.companyDetails.urlPath),this.$t("company_clients_page_title",{project:t})},isNotFetched:function(){return!0},filteredClentList:function(){if(this.searchTerm){var t=this.searchTerm.toLowerCase(),e=Object(b["b"])(t);return this.clientList.filter((function(r){var n=(r.firstName||"").toLowerCase(),s=(r.lastName||"").toLowerCase(),a="".concat(n," ").concat(s),i="".concat(s," ").concat(n),c=(r.facebook||"").toLowerCase(),o=(r.instagram||"").toLowerCase(),l=(r.telegram||"").toLowerCase(),u=(r.vk||"").toLowerCase(),p=Object(b["b"])((r.phone||"").toLowerCase()),d=Object(b["b"])((r.viber||"").toLowerCase()),m=Object(b["b"])((r.whatsapp||"").toLowerCase());return n.startsWith(t)||s.startsWith(t)||a.startsWith(t)||i.startsWith(t)||c.startsWith(t)||o.startsWith(t)||l.startsWith(t)||u.startsWith(t)||p.startsWith(e)||d.startsWith(e)||m.startsWith(e)}))}return this.clientList}}),mounted:function(){this.trackUserAction({actionName:"openClientsPage"})},methods:w({},Object(l["b"])("auth",["trackUserAction"]),{},Object(l["b"])("client",["fetchClientList"]),{clientStatusFormatter:h,fetch:function(){var t=i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchClientList({variables:{companyId:this.companyId}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},g=C,O=r("42e1"),_=Object(O["a"])(g,n,s,!1,null,null,null);e["default"]=_.exports}}]);
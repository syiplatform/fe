(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[91],{"533d":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{attrs:{padding:""}},[r("q-card",{staticClass:"border-radius bg-transparent q-my-xs",class:e.$q.screen.lt.sm?"q-py-md":"q-py-lg",attrs:{flat:""}},[r("q-list",{staticClass:"row col-xs-12"},[r("q-item",{staticClass:"col-xs-12 col-sm-auto row items-stretch text-primary"},[r("add-button",{attrs:{namespace:"companyUser",rounded:"",label:e.$t("action_send")}})],1),e._l(e.companyUserList,(function(t){return r("q-item",{key:t.id,staticClass:"col-xs-12"},[e.currentUserIsSuperAdmin?r("q-item-section",{attrs:{avatar:""}},[r("router-link",{attrs:{to:{name:"user-profile",params:{userId:t.user.id}}}},[e._v("\n            Id: "+e._s(t.user.id)+"\n          ")])],1):e._e(),r("q-item-section",[r("div",{staticClass:"no-wrap"},[r("q-icon",{attrs:{name:"mail"}}),e._v(" "+e._s(t.user.email))],1),t.user.externalLogins&&t.user.externalLogins.length?r("div",[e._v("\n            "+e._s(e.$t("login_with"))+":\n            "+e._s(t.user.externalLogins.map((function(t){return e.snsServiceTypeFormat(t)||"email"})).join(" "+e.$t("or")+" "))+"\n          ")]):r("div",[e._v("\n            "+e._s(e.$t("field_username"))+": "+e._s(t.user.username)+"\n          ")])]),r("q-item-section",{staticClass:"col-xs-auto",attrs:{side:""}},["original"!==t.reason?r("q-btn",{staticClass:"q-mr-xs",attrs:{rounded:"",color:"negative",icon:"clear"},on:{click:function(r){return e.exclude(t.user.id)}}}):r("q-badge",{staticClass:"q-py-sm q-px-xs",attrs:{outline:"",rounded:"",color:"green",label:e.$t("owner_text")}})],1)],1)}))],2)],1),r("company-user-invite-form",{attrs:{companyId:e.companyId}})],1)},s=[],a=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("96cf"),r("c973")),i=r.n(a),o=r("9523"),c=r.n(o),m=(r("c5f6"),r("2f62")),l=r("ee47"),u=r("76ab"),p=r("b22d"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{attrs:{value:e.isCompanyUserFormVisible,maximized:e.$q.screen.lt.sm},on:{"before-hide":e.cancel}},[r("q-layout",{staticClass:"bg-white",attrs:{view:"hhh lpr fFf",container:""}},[r("q-page-container",[r("q-page",{staticClass:"bg-white q-pa-lg"},[r("div",{staticClass:"q-my-sm"},[r("div",{staticClass:"text-h5"},[e._v("\n              "+e._s(e.$t("user_invite_form_title"))+"\n            ")])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 q-my-lg"},[r("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:e.$t("field_email")+"*",maxlength:"255","bottom-slots":"",hint:e.$t("user_invite_form_hint"),error:e.$v.form.email.$error,"error-message":e.getErrorMessage(e.$v.form.email,e.t)},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1)])])],1),r("q-footer",{staticClass:"bg-white row q-py-sm q-px-md"},[r("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:e.$q.screen.lt.sm?"order-last":"q-mr-sm",attrs:{rounded:"",label:e.$t("action_cancel"),color:"secondary",icon:"arrow_back"},on:{click:e.cancel}}),r("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:e.$q.screen.lt.sm?"q-mb-sm":"q-mr-sm",attrs:{rounded:"",label:e.$t("action_send"),color:"primary",icon:"add"},on:{click:e.saveChanges}})],1)],1)],1)},y=[],f=r("1cb6"),h=r("b5ae"),b=r("5944"),g=r("d59f");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={name:"CompanyUserInviteForm",mixins:[b["a"]],props:{companyId:{type:[Number,String],required:!0}},data:function(){return{t:this.$t.bind(this),form:{email:""}}},computed:_({},Object(m["c"])("companyUser",["isCompanyUserFormVisible","inviteCompanyUsersError"])),watch:{isCompanyUserFormVisible:function(e){e&&this.trackUserAction({actionName:"openInviteUserDialog"})}},methods:_({},Object(m["b"])("auth",["trackUserAction"]),{},Object(m["d"])("companyUser",["hideForm"]),{},Object(m["b"])("companyUser",["inviteCompanyUsers"]),{getErrorMessage:g["a"],saveChanges:function(){var e=i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.$touch(),!this.$v.form.$error){e.next=3;break}return e.abrupt("return");case 3:return f["a"].logEvent("company-user-invite-form","invite-user","",0,this.$router.currentRoute),e.prev=4,e.next=7,this.inviteCompanyUsers({variables:{companyId:+this.companyId,email:this.form.email}});case 7:this.inviteCompanyUsersError?this.$q.notify({type:"negative",message:this.inviteCompanyUsersError}):this.$q.notify({type:"positive",message:this.$t("company_user_invite_success")}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),this.$q.notify({type:"negative",message:this.$t("company_user_invite_error")});case 13:this.form.email="",this.cancel();case 15:case"end":return e.stop()}}),e,this,[[4,10]])})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$v.$reset(),this.hideForm()}}),validations:{form:{email:{required:h["required"],maxLength:Object(h["maxLength"])(255),email:h["email"]}}}},q=O,w=r("42e1"),x=Object(w["a"])(q,d,y,!1,null,null,null),$=x.exports;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U={name:"CompanyUsers",mixins:[l["a"]],components:{AddButton:p["a"],CompanyUserInviteForm:$},props:{companyId:[Number,String],required:!0},meta:function(){return{title:this.pageTitle}},computed:C({},Object(m["c"])("auth",["currentUserIsSuperAdmin"]),{},Object(m["c"])("companyUser",["companyUserList","excludeCompanyUsersError"]),{},Object(m["c"])("company",["companyDetails"]),{isNotFetched:function(){return!0},pageTitle:function(){var e="";return this.companyDetails&&(e=this.companyDetails.urlPath),this.$t("company_users_page_title",{project:e})}}),mounted:function(){this.trackUserAction({actionName:"openUsersPage"})},methods:C({},Object(m["b"])("auth",["trackUserAction"]),{snsServiceTypeFormat:u["a"]},Object(m["b"])("companyUser",["fetchCompanyUserList","excludeCompanyUser"]),{fetch:function(){var e=i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCompanyUserList({variables:{companyId:this.companyId}});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exclude:function(){var e=i()(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.dialog({title:this.$t("company_user_exclude_dialog_confirmation"),ok:this.$t("Yes"),cancel:this.$t("No")}).onOk(i()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{r.excludeCompanyUser({variables:{companyId:r.companyId,userId:t}})}catch(n){r.$q.notify({type:"negative",message:r.$t("company_user_exclude_error")})}case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},k=U,I=Object(w["a"])(k,n,s,!1,null,null,null);t["default"]=I.exports}}]);
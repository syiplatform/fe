(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"43e5":function(e,t,n){"use strict";var r=n("6c35"),a=n.n(r);a.a},"6c35":function(e,t,n){},e885:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"row",attrs:{padding:""}},[n("q-no-ssr",[n("div",{staticClass:"row col-xs-12"},[n("q-card",{staticClass:"col-xs-12 q-mb-sm bg-white border-radius",class:{"q-py-lg":!e.$q.screen.lt.sm}},[n("div",{staticClass:"text-h4 q-pa-md text-weight-light text-primary text-center"},[e._v("\n          "+e._s(e.$t("welcome_banner"))+"\n        ")]),e.showTrialBanner?n("div",{staticClass:"text-h6 q-pa-md text-weight-light text-primary text-center"},[e._v("\n          "+e._s(e.$t("activate_trial_period_success_banner"))+"\n        ")]):e._e(),e.paymentKey?n("company-payment",{attrs:{paymentKey:e.paymentKey,companyId:e.companyId}}):e._e(),e.isFirstLogIn&&e.isLandingCreated&&!e.isCompanyPaymentPending?n("div",{staticClass:"text-h6 q-pa-md text-weight-light text-primary text-center"},[e._v("\n          "+e._s(e.$t("activate_free_period_success_banner"))+"\n        ")]):e._e(),e.isCompanyPaymentPending?e._e():n("div",{staticClass:"row justify-center q-px-md"},[e.configurationPending?n("div",{staticClass:"q-pa-sm col-xs-12 row justify-center items-center"},[n("q-spinner",{attrs:{size:35,color:"info"}})],1):e._e(),!e.configurationPending&&e.isLandingCreated?n("div",{staticClass:"col-xs-12 col-sm-4 q-pb-sm",class:{"q-pr-sm":!e.$q.screen.lt.sm}},[n("q-card",{staticClass:"full-height border-radius bg-accent text-white cursor-pointer\n              row items-center",class:{"q-py-lg":!e.$q.screen.lt.sm},on:{click:e.openlandingCopyLinkModal}},[n("q-card-section",{staticClass:"row items-center justify-center"},[n("div",{staticClass:"text-h5 q-pa-xs text-center",class:{"q-px-xs q-py-md":!e.$q.screen.lt.sm}},[n("q-icon",{attrs:{size:"24px",name:"file_copy"}}),e._v("\n                  "+e._s(e.$t("action_past_link"))+"\n                ")],1),n("div",{staticClass:"col-xs-12 text-center text-subtitle2"},[e._v("\n                  "+e._s(e.$t("onboarding_past_link"))+"\n                ")])])],1)],1):e._e(),e.configurationPending?e._e():n("div",{staticClass:"col-xs-12 col-sm-4 q-pb-sm",class:{"q-pr-sm":!e.$q.screen.lt.sm}},[n("q-card",{staticClass:"full-height border-radius bg-secondary text-white cursor-pointer\n              row items-center",class:{"q-py-lg":!e.$q.screen.lt.sm},on:{click:function(t){return e.onClick("landing-configuration","open-configuration")}}},[n("q-card-section",{staticClass:"row items-center justify-center"},[n("div",{staticClass:"text-h5 q-pa-xs text-center"},[n("q-icon",{attrs:{size:"24px",name:"view_compact"}}),e._v("\n                  "+e._s(e.isLandingCreated?e.$t("onboarding_edit_your_link"):e.$t("onboarding_create_your_link"))+"\n                ")],1),n("div",{staticClass:"col-xs-12 text-center text-subtitle2"},[e._v("\n                  "+e._s(e.$t("onboarding_setup_landing"))+"\n                ")])])],1)],1),e.coursePending?e._e():n("div",{staticClass:"col-xs-12 col-sm-4 q-pb-sm"},[n("q-card",{staticClass:"full-height border-radius bg-primary text-white cursor-pointer\n              row items-center",class:{"q-py-lg":!e.$q.screen.lt.sm},on:{click:e.goToUniversity}},[n("q-card-section",{staticClass:"row items-center justify-center"},[n("div",{staticClass:"text-h5 q-pa-xs text-center"},[n("q-icon",{attrs:{size:"24px",name:"work"}}),e._v("\n                   "+e._s(e.$t("page_overview_university"))+"\n                ")],1),n("div",{staticClass:"col-xs-12 text-center text-subtitle2"},[e._v("\n                  "+e._s(e.$t("page_overview_university_details"))+"\n                ")])])],1)],1)]),n("div",{staticClass:"q-px-sm"},[n("a",{staticClass:"row justify-center items-center q-py-sm no-underline text-secondary",attrs:{href:e.instagramLink,target:"_blank"}},[n("span",{staticClass:"q-pr-xs text-weight-bold"},[e._v("\n              "+e._s(e.$t("onboarding_subscribe_in_insta"))+"\n            ")]),n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",height:"24px",width:"24px",fill:"currentColor",viewBox:"0 0 56.7 56.7","enable-background":"new 0 0 56.7 56.7","xml:space":"preserve"}},[n("g",[n("path",{attrs:{d:"M28.2,16.7c-7,0-12.8,5.7-12.8,12.8s5.7,12.8,12.8,12.8S41,36.5,41,29.5S35.2,16.7,28.2,16.7z M28.2,37.7  c-4.5,0-8.2-3.7-8.2-8.2s3.7-8.2,8.2-8.2s8.2,3.7,8.2,8.2S32.7,37.7,28.2,37.7z"}}),n("circle",{attrs:{cx:"41.5",cy:"16.4",r:"2.9"}}),n("path",{attrs:{d:"M49,8.9c-2.6-2.7-6.3-4.1-10.5-4.1H17.9c-8.7,0-14.5,5.8-14.5,14.5v20.5c0,4.3,1.4,8,4.2,10.7c2.7,2.6,6.3,3.9,10.4,3.9  h20.4c4.3,0,7.9-1.4,10.5-3.9c2.7-2.6,4.1-6.3,4.1-10.6V19.3C53,15.1,51.6,11.5,49,8.9z M48.6,39.9c0,3.1-1.1,5.6-2.9,7.3   s-4.3,2.6-7.3,2.6H18c-3,0-5.5-0.9-7.3-2.6C8.9,45.4,8,42.9,8,39.8V19.3c0-3,0.9-5.5,2.7-7.3c1.7-1.7,4.3-2.6,7.3-2.6h20.6   c3,0,5.5,0.9,7.3,2.7c1.7,1.8,2.7,4.3,2.7,7.2V39.9L48.6,39.9z"}})])])])])],1)],1)]),n("div",{staticClass:"row col-xs-12"},[n("landing-creation-service",{staticClass:"col-xs-12 q-mb-sm border-radius overflow-hidden",attrs:{text:e.$t("company_tariff_request")}}),n("landing-copy-link-modal",{attrs:{isLandingExist:e.isLandingCreated}})],1)],1)},a=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("96cf"),n("c973")),s=n.n(i),c=n("9523"),o=n.n(c),u=(n("c5f6"),n("2f62")),l=n("b06b"),p=n("70dd"),h=n("aacf"),m=n("1cb6"),f=n("4dd0"),d=n.n(f),g=n("7f45"),y=n.n(g),b=n("c98f"),v=n("187b"),x=n("da5d"),C=n("f8b0"),w=n("1017");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={name:"Onboarding",components:{landingCopyLinkModal:v["a"],companyPayment:x["a"],landingCreationService:C["a"]},mixins:[p["a"]],props:{companyId:[Number,String],paymentKey:String,required:!0},data:function(){return{showBanner:!1,showTrialBanner:!1,isRedirectToYandexPayment:!1,urls:h["a"],promoData:w["a"],configurationPending:!1,coursePending:!1}},computed:P({},Object(u["c"])("company",["activateTrialPeriodData","activateTrialPeriodError","companyPaymentCreateData","companyDetails","companyChangeTariffCalculationsDetails","companyChangeTariffDetails","companyChangeTariffError","isCompanyPaymentPending"]),{},Object(u["c"])("auth",["isAuthenticated","currentUserId"]),{},Object(u["e"])("auth",["isSentConfirmationEmail","isSentConfirmationEmailError"]),{},Object(u["c"])("landingConfiguration",["isLandingExist"]),{},Object(u["c"])("course",["isCourseParticipantDetails","coursePaymentCreateError","coursePaymentCreateData"]),{},Object(u["c"])("clubMembership",["clubMemberDetails","clubMembershipPaymentCreateError","clubMembershipPaymentCreateData"]),{landingLink:function(){return this.companyDetails.finalPath},isLandingCreated:function(){return!!d.a.get("signup-landing-configuration")||this.isLandingExist},isFirstLogIn:function(){return!!d.a.get("signup-landing-configuration")},dialogExpirationDate:function(){return y()().add(6,"months")},instagramLink:function(){return"ru"===this.$q.lang.isoName?"https://www.instagram.com/seeyour.info/":"https://www.instagram.com/seeyour.info.global/"}}),mounted:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.companyId){e.next=13;break}return this.configurationPending=!0,e.next=4,this.fetchIndividualCompanyDetails({variables:{id:this.companyId}});case 4:return e.next=6,this.checkApplyTariff();case 6:return e.next=8,this.checkBuyCourse();case 8:return e.next=10,this.checkBuyClubMembership();case 10:return e.next=12,this.fetchFullLandingConfigurationDetails({variables:{companyId:this.companyId},$t:this.$t.bind(this)});case 12:this.configurationPending=!1;case 13:this.trackUserAction({actionName:"openOnboardingPage"});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){this.isRedirectToYandexPayment||(d.a.remove("signup-landing-configuration"),d.a.remove("signup-product-list"))},methods:P({},Object(u["d"])("landingConfiguration",["openlandingCopyLink"]),{},Object(u["b"])("company",["activateTrialPeriod","createPayment","changeTariff","fetchChangeTariffCalculations","fetchIndividualCompanyDetails"]),{},Object(u["b"])("landingConfiguration",["fetchFullLandingConfigurationDetails"]),{},Object(u["b"])("auth",["confirmEmailRequest","trackUserAction"]),{},Object(u["b"])("course",["fetchIsCourseParticipantDetails","createCoursePayment"]),{},Object(u["b"])("clubMembership",["createClubMembershipPayment","fetchClubMemberDetails"]),{clickOnConfirmationEmail:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.confirmEmailRequest({variables:{}});case 2:this.isSentConfirmationEmail?this.$q.notify({type:"positive",message:this.$t("client_profile_email_confirm_sent")}):this.$q.notify({type:"negative",message:this.$t("client_profile_email_confirm_sent_error")});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkApplyTariff:function(){var e=s()(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.a.get("signupPayDays")&&(this.payDays=parseInt(d.a.get("signupPayDays"),10),d.a.remove("signupPayDays")),t=d.a.get("signupPromocode"),t&&d.a.remove("signupPromocode"),n=d.a.get("needToApplyTariff"),!n||n===b["h"].Free1){e.next=19;break}if(r=n,d.a.remove("needToApplyTariff"),!d.a.get("signupTrial")){e.next=12;break}return e.next=10,this.activateTrialPeriodTariff(r);case 10:e.next=17;break;case 12:if(a=0,r===b["h"].Medium1?a=this.medium1Price:r===b["h"].Large1&&(a=this.large1Price),!(a>0)){e.next=17;break}return e.next=17,this.payTariff(r,a,t);case 17:e.next=20;break;case 19:this.showBanner=!0;case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkBuyCourse:function(){var e=s()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.coursePending=!0,!d.a.get("buyCourse")){e.next=13;break}if(t=parseInt(d.a.get("buyCourse"),10),d.a.remove("buyCourse"),!t){e.next=13;break}return e.next=7,this.fetchIsCourseParticipantDetails({variables:{courseId:t,userId:this.currentUserId}});case 7:if(!this.isCourseParticipantDetails){e.next=11;break}this.$router.push({name:"client-university"}),e.next=13;break;case 11:return e.next=13,this.payCourse(t);case 13:this.coursePending=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkBuyClubMembership:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d.a.get("buyClubMembership")){e.next=10;break}return d.a.remove("buyClubMembership"),e.next=4,this.fetchClubMemberDetails({variables:{userId:this.currentUserId}});case 4:if(!this.clubMemberDetails){e.next=8;break}this.$router.push({name:"club-membership"}),e.next=10;break;case 8:return e.next=10,this.buyClubMembership();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openURL:l["a"],openlandingCopyLinkModal:function(){m["a"].logEvent("onboarding-page","click","openlandingCopyLinkModal",0,this.$router.currentRoute),this.openlandingCopyLink()},logInstructions:function(){m["a"].logEvent("menu-navigation","open","instructions",0,this.$router.currentRoute),this.logClickEvent("instructions")},logInstructionsbonusSystem:function(){m["a"].logEvent("menu-navigation","open","instructions-bonuses",0,this.$router.currentRoute),this.logClickEvent("instructions-bonuses")},onClick:function(e,t){this.logClickEvent(t),this.$router.push({name:e,params:{companyId:this.companyId}})},goToUniversity:function(){this.logClickEvent("client-university"),this.$router.push({name:"client-university"})},logClickEvent:function(e){m["a"].logEvent("onboarding-page","click",e,0,this.$router.currentRoute)},activateTrialPeriodTariff:function(){var e=s()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m["a"].logEvent("company-tariffs-page","activateTrialPeriodTariff",t,0,this.$router.currentRoute),e.next=3,this.activateTrialPeriod({variables:{tariff:t,companyId:this.companyId}});case 3:if(!this.activateTrialPeriodError){e.next=7;break}this.$q.notify({type:"negative",message:this.activateTrialPeriodError}),e.next=10;break;case 7:return e.next=9,this.fetchIndividualCompanyDetails({variables:{id:this.companyId}});case 9:this.showTrialBanner=!0;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),payCourse:function(){var e=s()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createCoursePayment({variables:{courseId:t}});case 2:this.coursePaymentCreateError?this.$q.notify({type:"negative",message:this.coursePaymentCreateError}):this.coursePaymentCreateData&&this.coursePaymentCreateData.paymentUrl&&(window.location=this.coursePaymentCreateData.paymentUrl);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),buyClubMembership:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createClubMembershipPayment({variables:{userId:this.currentUserId}});case 2:this.clubMembershipPaymentCreateError?this.$q.notify({type:"negative",message:this.clubMembershipPaymentCreateError}):this.clubMembershipPaymentCreateData&&this.clubMembershipPaymentCreateData.paymentUrl&&(window.location=this.clubMembershipPaymentCreateData.paymentUrl);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),payTariff:function(){var e=s()(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r&&m["a"].logEvent("company-tariffs-page","promocode",r,0,this.$router.currentRoute),m["a"].logEvent("company-tariffs-page","createPayment",t,n,this.$router.currentRoute),e.next=4,this.createPayment({variables:{payDays:this.payDays,tariff:t,companyId:this.companyId,promocode:r,bonusAmount:0,isOnboarding:!0,currency:"ru"===this.$q.lang.isoName?"RUB":"USD"}});case 4:if(!this.companyPaymentCreateData){e.next=12;break}if(!this.companyPaymentCreateData.isFree){e.next=10;break}return e.next=8,this.fetchIndividualCompanyDetails({variables:{id:this.companyId}});case 8:e.next=12;break;case 10:this.isRedirectToYandexPayment=!0,window.location=this.companyPaymentCreateData.confirmationUrl;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}(),applyNewTariff:function(){var e=s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m["a"].logEvent("company-tariffs-page","applyTariff",this.newTariff,0,this.$router.currentRoute),e.next=3,this.changeTariff({variables:{tariff:this.newTariff,companyId:this.companyId}});case 3:this.companyChangeTariffError?this.$q.notify({type:"negative",message:this.companyChangeTariffError}):(this.closeModal(),this.$q.notify({type:"positive",message:this.$t("change_tariff_success_updated")}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeCurrentTariff:function(){var e=s()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m["a"].logEvent("company-tariffs-page","changeTariff",t,0,this.$router.currentRoute),this.newTariff=t,e.next=4,this.fetchChangeTariffCalculations({variables:{tariff:t,companyId:this.companyId}});case 4:return this.companyChangeTariffCalculationsDetails&&(this.isChangeTariffOpened=!0),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeModal:function(){this.newTariff=null,this.isChangeTariffOpened=!1}})},q=k,T=(n("43e5"),n("42e1")),$=Object(T["a"])(q,r,a,!1,null,null,null);t["default"]=$.exports}}]);
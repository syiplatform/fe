(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[88],{b1dc:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("q-banner",{staticClass:"bg-info text-white col-xs-12 text-caption border-radius q-mb-md",attrs:{appear:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[r("q-icon",{attrs:{name:"help",color:"white"}})]},proxy:!0}])},[r("div",{staticClass:"row items-center"},[r("div",{staticClass:"col-xs-12 col-lg text-center"},[t._v("\n        "+t._s(t.$t("read_more_about_products"))+"\n      ")]),r("q-btn",{staticClass:"col-xs-12 col-lg-auto",class:t.$q.screen.lt.lg?"q-mt-sm":"",attrs:{rounded:"",size:"md",outline:"",label:t.$t("open_instruction"),type:"a",target:"_blank",href:t.urls.blog.manageProductsList}})],1)]),r("q-card",{staticClass:"border-radius q-mb-md bg-white"},[r("div",{staticClass:"row q-pa-md q-mb-xs"},[r("q-input",{staticClass:"col q-mr-lg",attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",debounce:300,placeholder:t.$t("product_category_search_placeholder"),color:"secondary",icon:"search"},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),r("div",{staticClass:"col-xs-auto"},[r("add-button",{attrs:{namespace:"product",showFormMutationName:"productCategoryShowForm",setSelectedIdMutationName:"productCategorySetSelectedId"}})],1)],1)]),r("div",{class:t.$q.screen.lt.sm?"q-py-sm":""},[r("image-tiles",{ref:"imageTiles",attrs:{namespace:"product",pagedListName:"productCategory",hasInfo:!0,hasMain:!1,deleteRecordActionName:"deleteProductCategory",showFormMutationName:"productCategoryShowForm",deleteErrorGetterName:"productCategoryDeleteError",confirmErrorGetterName:"productCategoryConfirmError",confirmErrorActionName:"productCategoryConfirmError",setSelectedIdMutationName:"productCategorySetSelectedId",fetch:t.fetch,messageConfirmDialogConfirmation:"product_category_confirm_dialog_confirmation",messageFormErrorsCanNotDelete:"product_category_form_errors_can_not_delete",messageFormSuccessDelete:"product_category_form_success_deleted"},scopedSlots:t._u([{key:"title",fn:function(e){var o=e.entity;return[r("span",[t._v(t._s(o.title))])]}},{key:"info",fn:function(e){var o=e.entity;return[r("div",{staticClass:"row"},[r("div",{staticClass:"q-pr-sm"},[r("div",[t._v(t._s(o.description))])])])]}}])}),t.companyId?r("company-product-category-form",{attrs:{companyId:t.companyId}}):t._e()],1)],1)},a=[],s=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("96cf"),r("c973")),n=r.n(s),c=r("9523"),i=r.n(c),d=(r("c5f6"),r("11ec")),u=r("2f62"),p=r("ee47"),l=r("241b"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{attrs:{value:t.productCategoryFormIsVisible,maximized:t.$q.screen.lt.sm},on:{"before-hide":t.cancel}},[r("q-layout",{staticClass:"bg-white",attrs:{view:"hhh lpr fFf",container:""}},[r("q-page-container",[t.productCategoryFormIsVisible?r("q-page",{staticClass:"bg-white q-py-md",class:t.$q.screen.lt.sm?"q-px-md":"q-px-lg "},[r("div",{staticClass:"text-h5 q-pb-md q-px-sm"},[t._v("\n                "+t._s(t.isCreation?t.$t("product_category_create_page_title"):t.formModel.title)+"\n        ")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 row"},[r("div",{staticClass:"col-xs-12 col-md-6 q-px-xs"},[r("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("field_name"),"bottom-slots":"",autogrow:"",error:t.$v.formModel.title.$error,"error-message":t.getErrorMessage(t.$v.formModel.title,t.t)},model:{value:t.formModel.title,callback:function(e){t.$set(t.formModel,"title","string"===typeof e?e.trim():e)},expression:"formModel.title"}})],1),r("div",{staticClass:"col-xs-12 q-px-xs"},[r("q-input",{attrs:{rounded:"",standout:"bg-grey-2 text-grey-14",label:t.$t("field_description"),"bottom-slots":"",autogrow:""},model:{value:t.formModel.description,callback:function(e){t.$set(t.formModel,"description","string"===typeof e?e.trim():e)},expression:"formModel.description"}})],1)])])]):t._e()],1),r("q-footer",{staticClass:"bg-white row q-py-sm q-px-md"},[r("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"order-last":"q-mr-sm",attrs:{rounded:"",label:t.$t("action_cancel"),color:"secondary",disable:t.loading,icon:"arrow_back"},on:{click:t.cancel}}),r("q-btn",{staticClass:"col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"q-mb-sm":"q-mr-sm",attrs:{rounded:"",label:t.$t(t.isCreation?"action_create":"action_save"),color:"primary",icon:t.isCreation?"add":"save",loading:t.loading},on:{click:t.saveChanges}})],1)],1)],1)},g=[],y=r("1cb6"),h=r("b5ae"),f=r("5944"),b=r("aacf"),v=r("d59f"),C=r("376c");function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var x={name:"CompanyProductCategoryForm",mixins:[f["a"]],components:{CustomEditor:C["a"]},props:{companyId:{type:[Number,String],required:!0}},data:function(){return{t:this.$t.bind(this),formModelKey:"productCategoryDetails",loading:!1,urls:b["a"]}},computed:w({},Object(u["c"])("product",["productCategoryCreateError","productCategoryUpdateError","productCategoryDetails","productCategoryId","productCategoryFormIsVisible"]),{isCreation:function(){return!this.productCategoryId}}),watch:{productCategoryFormIsVisible:function(){var t=n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchProductCategoryDetails({variables:{id:+this.productCategoryId}});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},methods:w({},Object(u["d"])("product",["productCategoryHideForm","setSelectedId"]),{},Object(u["b"])("product",["fetchProductCategoryDetails","createProductCategory","updateProductCategory"]),{getErrorMessage:v["a"],createNewProductCategory:function(){var t=n()(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.formModel,r=e.title,o=e.description,t.prev=1,t.next=4,this.createProductCategory({variables:{input:{title:r,description:o,companyId:+this.companyId}}});case 4:this.productCategoryCreateError?this.$q.notify({type:"negative",message:this.productCategoryCreateError}):(this.cancel(),this.$q.notify({type:"positive",message:this.$t("product_category_form_success_created")}),y["a"].logEvent("my-product-categories-page","create-product-category",this.companyId,0,this.$router.currentRoute)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("product_category_form_errors_can_not_save")});case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}(),editProductCategory:function(){var t=n()(regeneratorRuntime.mark((function t(){var e,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.formModel,r=e.id,o=e.title,a=e.description,t.prev=1,t.next=4,this.updateProductCategory({variables:{id:r,input:{title:o,description:a}}});case 4:this.productCategoryUpdateError?this.$q.notify({type:"negative",message:this.productCategoryUpdateError}):(this.cancel(),this.$q.notify({type:"positive",message:this.$t("product_category_form_success_updated")}),y["a"].logEvent("my-product-category-page","edit-product-category",this.companyId,0,this.$router.currentRoute)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),this.$q.notify({type:"negative",message:this.$t("product_category_form_errors_can_not_save")});case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}(),saveChanges:function(){var t=n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.validateFormAndNotify()){t.next=2;break}return t.abrupt("return");case 2:if(this.loading=!0,!this.isCreation){t.next=8;break}return t.next=6,this.createNewProductCategory();case 6:t.next=10;break;case 8:return t.next=10,this.editProductCategory();case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$v.$reset(),this.productCategoryHideForm()}}),validations:{formModel:{title:{required:h["required"],maxLength:Object(h["maxLength"])(200)}}}},q=x,O=r("42e1"),P=Object(O["a"])(q,m,g,!1,null,null,null),$=P.exports,j=r("b22d");function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var E={name:"CompanyProductCategories",mixins:[p["a"]],components:{ImageTiles:l["a"],CompanyProductCategoryForm:$,AddButton:j["a"]},props:{companyId:[Number,String],required:!0},meta:function(){return{title:this.pageTitle}},data:function(){return{searchTerm:"",urls:b["a"]}},computed:I({},Object(u["c"])("product",{pagination:"productCategoryPagedListPagination"}),{},Object(u["c"])("company",["companyDetails"]),{pageTitle:function(){var t="";return this.companyDetails&&this.companyDetails.urlPath&&(t=this.companyDetails.urlPath),this.$t("company_products_lists_page_title",{project:t})}}),destroyed:function(){this.resetPagination()},mounted:function(){this.trackUserAction({actionName:"openProductsListPage"})},watch:{searchTerm:function(){this.resetPagination();var t=!1;this.fetch(t),y["a"].logEvent("my-product-categories-page","search-product-category",this.searchTerm,0,this.$router.currentRoute)}},methods:I({},Object(u["b"])("auth",["trackUserAction"]),{},Object(u["b"])("product",["fetchProductCategoryPagedList"]),{},Object(u["d"])("product",{paginationUpdate:"productCategoryPagedListPaginationUpdate"}),{resetPagination:function(){var t=Object(d["a"])(!0,{},this.pagination);t.pageNumber=1,this.paginationUpdate(t)},fetch:function(){var t=n()(regeneratorRuntime.mark((function t(){var e,r,o,a,s,n,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]&&c[0],e||this.$refs.imageTiles&&this.$refs.imageTiles.reset(),r=this.pagination,o=r.pageNumber,a=r.pageSize,s=r.sortBy,n=r.descending,t.next=5,this.fetchProductCategoryPagedList({variables:{companyId:+this.companyId,searchTerm:this.searchTerm,pageNumber:o,pageSize:a,sortBy:s,descending:n},needAppendItems:e});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},D=E,M=Object(O["a"])(D,o,a,!1,null,null,null);e["default"]=M.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"3c1b":function(t,n,e){"use strict";var a=e("e060"),i=e.n(a);i.a},a51c:function(t,n,e){"use strict";e.r(n);var a=function(){var t,n=this,e=n.$createElement,a=n._self._c||e;return n.isLandingConfigurationBlocked?a("q-layout",{staticClass:"row justify-center items-center",attrs:{view:"hHh Lpr lFf"}},[a("div",{staticClass:"col-xs-12 row justify-center"},[a("div",{staticClass:"row landing-container q-py-md"},[a("div",{staticClass:"col-xs-12 q-pa-lg text-h6 text-center"},[n._v("\n        "+n._s(n.$t("landing_blocked_text"))+"\n      ")]),a("div",{staticClass:"col-xs-12 q-pa-lg"},[a("copyright",{staticClass:"shadow-text-white"})],1)])])]):a("q-layout",{staticClass:"row",attrs:{view:"hHh Lpr fFf"}},[n.isCartActive?a("q-footer",{staticClass:"bg-transparent",attrs:{elevated:""}},[a("background",{attrs:{styles:n.footerBackgroundStyle,isPublicMode:!0}},[a("q-tabs",{attrs:{"indicator-color":"transparent"}},[a("q-tab",{directives:[{name:"show",rawName:"v-show",value:"product-details"===n.$router.currentRoute.name||"client-cart"===n.$router.currentRoute.name,expression:"$router.currentRoute.name === 'product-details'\n          || $router.currentRoute.name === 'client-cart'"}],attrs:{name:"back",disable:n.isHomeBtnLoading||n.isCartBtnLoading},on:{click:n.goBack}},[n.isBackBtnLoading?a("q-spinner"):a("div",{staticClass:"q-pa-sm"},[a("q-icon",{staticClass:"q-tab__icon",attrs:{name:"arrow_back"}}),a("div",{staticClass:"q-tab__label"},[n._v(n._s(n.$t("client_navigation_back")))])],1)],1),a("q-tab",{attrs:{name:"product",disable:n.isCartBtnLoading||n.isBackBtnLoading},on:{click:n.goHome}},[n.isHomeBtnLoading?a("q-spinner"):a("div",{staticClass:"q-pa-sm"},[a("q-icon",{staticClass:"q-tab__icon",attrs:{name:"home"}}),a("div",{staticClass:"q-tab__label"},[n._v(n._s(n.$t("client_navigation_home")))])],1)],1),a("q-tab",{attrs:{name:"cart",disable:n.isHomeBtnLoading||n.isBackBtnLoading},on:{click:n.goToCart}},[n.cartItems>0?a("q-badge",{attrs:{color:"red",floating:""}},[n._v(n._s(n.cartItems))]):n._e(),n.isCartBtnLoading?a("q-spinner"):a("div",{staticClass:"q-pa-sm"},[a("q-icon",{staticClass:"q-tab__icon",attrs:{name:"shopping_cart"}}),a("div",{staticClass:"q-tab__label"},[n._v(n._s(n.$t("client_navigation_cart")))])],1)],1)],1)],1)],1):n._e(),a("q-page-container",{staticClass:"row col-xs-12"},[a("background",{staticClass:"primary-background row col-xs-12 justify-center",class:(t={},t[n.layout]=!0,t["q-pb-xl"]=n.landingConfigurationDetails.isCopyrightHidden,t),attrs:{styles:n.primaryLandingBackgroundStyle,changes:n.blocks&&n.blocks.length,isMainBg:!0,isPublicMode:!0}},[a("background",{staticClass:"secondary-background",attrs:{styles:n.secondaryLandingBackgroundStyle,changes:n.blocks&&n.blocks.length,isMainBg:!0,isPublicMode:!0}}),n._v("\n      "+n._s(n.landingConfigurationDetailsError)+"\n      "),a("router-view")],1)],1)],1)},i=[],r=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("456d"),e("551c"),e("06db"),e("6762"),e("2fdb"),e("a481"),e("96cf"),e("c973")),o=e.n(r),s=e("9523"),c=e.n(s),u=(e("7f7f"),e("7514"),e("2f62")),g=e("138b"),l=e("1cb6"),d=e("c98f"),p=e("aacf"),h=e("a5d4"),f=e("6c4b"),m=e("c0e9"),y=e.n(m),C=e("fce1");function b(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function v(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?b(Object(e),!0).forEach((function(n){c()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var w=function(t){if(t.params&&t.params.path)return t.params.path;if(t.matched){var n=t.matched.find((function(t){return"landing"===t.name}));if(n){var e=n.props.default(t);if(e&&e.path)return e.path}}return""},k={name:"LandingConfigurationLayout",components:{copyright:g["a"]},data:function(){return{isProductPage:!1,isCartPage:!1,isBackBtnLoading:!1,isHomeBtnLoading:!1,isCartBtnLoading:!1}},props:{path:{type:String,required:!0},pageUid:{type:String,required:!1}},meta:function(){var t=this.canonicUrl,n=Object(f["a"])({ssrContext:this.$ssrContext}),e={title:this.seoTitle,meta:{robots:{name:"robots",content:this.robots},description:{name:"description",content:this.seoDescription},keywords:{name:"keywords",content:this.seoKeywords},"og:type":{property:"og:type",content:"website"},"og:title":{property:"og:title",content:this.ogTitle},"og:description":{property:"og:description",content:this.ogDescription},"og:url":{property:"og:url",content:t},"og:site_name":{property:"og:site_name",content:this.$t("og_site_name")},"og:image":{property:"og:image",content:this.ogImage},"og:locale":{property:"og:locale",content:this.ogLang}},link:{canonical:{rel:"canonical",href:t}}};return n&&this.pageMetaName&&this.pageMetaContent&&(e.meta.customUser={name:this.pageMetaName,content:this.pageMetaContent}),e},computed:v({},Object(u["c"])("landingConfiguration",["isLandingExist","isLandingConfigurationBlocked","landingConfigurationDetails","configurationMeta","landingConfigurationDetailsError","blocks","layout","primaryLandingBackgroundStyle","secondaryLandingBackgroundStyle","footerBackgroundStyle","landingCache","isCartActive","companyId"]),{},Object(u["c"])("auth",["currentUserIsSuperAdmin"]),{},Object(u["c"])("company",["companyUpdateScreenshotErrorCode"]),{},Object(u["c"])("companyPayment",["cartItems"]),{backgroundClass:function(){return"bg-white"},robots:function(){return!this.isLandingExist||this.isLandingConfigurationBlocked?"noindex":"all"},seoTitle:function(){if(this.landingConfigurationDetails){if(this.configurationMeta&&this.configurationMeta.seoTitle)return this.configurationMeta.seoTitle;if(this.landingConfigurationDetails.companyName)return this.landingConfigurationDetails.companyName}return this.path},seoDescription:function(){return this.landingConfigurationDetails&&this.configurationMeta&&this.configurationMeta.seoDescription?this.configurationMeta.seoDescription:this.ogDescription},seoKeywords:function(){return this.landingConfigurationDetails&&this.configurationMeta&&this.configurationMeta.seoKeywords?this.configurationMeta.seoKeywords:""},pageMetaName:function(){return this.landingConfigurationDetails&&this.configurationMeta&&this.configurationMeta.pageMetaName?this.configurationMeta.pageMetaName:null},pageMetaContent:function(){return this.landingConfigurationDetails&&this.configurationMeta&&this.configurationMeta.pageMetaContent?this.configurationMeta.pageMetaContent:null},ogTitle:function(){if(this.configurationMeta&&this.configurationMeta.ogTitle)return this.configurationMeta.ogTitle;var t=this.path,n="company_landing_layout_page_ogTitle";return this.landingConfigurationDetails&&(this.landingConfigurationDetails.companyName&&(t=this.landingConfigurationDetails.companyName),this.landingConfigurationDetails.lang)?this.$t(n,this.landingConfigurationDetails.lang,{name:t}):this.$t(n,{name:t})},ogDescription:function(){if(this.configurationMeta&&this.configurationMeta.ogDescription)return this.configurationMeta.ogDescription;var t=this.path,n="company_landing_layout_page_default_description";return this.landingConfigurationDetails&&(this.landingConfigurationDetails.companyName&&(t=this.landingConfigurationDetails.companyName),this.landingConfigurationDetails.lang)?this.$t(n,this.landingConfigurationDetails.lang,{name:t}):this.$t(n,{name:t})},ogImage:function(){return this.configurationMeta&&this.configurationMeta.ogImage?"".concat(p["a"].imagePath).concat(this.configurationMeta.ogImage):"".concat("https://seeyour.local:8080","/statics/icons/favicon_package/favicon-32x32.png")},ogLang:function(){return this.landingConfigurationDetails&&this.landingConfigurationDetails.lang?Object(h["d"])(this.landingConfigurationDetails.lang):"ru_RU"},canonicUrl:function(){var t=this.landingConfigurationDetails;return t&&t.finalPath?this.pageUid?"".concat(t.finalPath,"/").concat(this.pageUid):t.finalPath:this.path?this.pageUid?"".concat("https://seeyour.local:8080","/").concat(this.path,"/").concat(this.pageUid):"".concat("https://seeyour.local:8080","/").concat(this.path):""}}),watch:{pageUid:function(){var t=o()(regeneratorRuntime.mark((function t(n){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=w(this.$router.currentRoute),a=this.landingCache["".concat(e,"-").concat(n||0)],a){t.next=7;break}return t.next=5,this.fetchFullLandingConfigurationDetails({variables:{hostname:Object(f["a"])(),companyPath:e,pageUid:n},$t:function(t){return t}});case 5:t.next=8;break;case 7:this.setLandingConfigurationDetails({data:a,tariff:null,$t:function(t){return t},force:!0});case 8:this.trackPageVisit();case 9:case"end":return t.stop()}}),t,this)})));function n(n){return t.apply(this,arguments)}return n}()},beforeRouteEnter:function(t,n,e){(n.params.pageUid||t.params.pageUid)&&e((function(n){var e=n.landingConfigurationDetails.tariff.name;return d["g"][e]>=d["g"][d["h"].Large1]||(n.$router.replace({name:t.name,params:{path:t.params.path}}),!1)})),e()},preFetch:function(){var t=o()(regeneratorRuntime.mark((function t(n){var e,a,i,r,o,s,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.store,a=n.currentRoute,i=n.ssrContext,r=w(a),o=e.getters["landingConfiguration/landingCache"]["".concat(r,"-").concat(this.pageUid||0)],o){t.next=7;break}return t.next=6,e.dispatch("landingConfiguration/fetchFullLandingConfigurationDetails",{variables:{hostname:Object(f["a"])({ssrContext:i}),companyPath:w(a),pageUid:a.params.pageUid},$t:function(t){return t}});case 6:s=t.sent;case 7:if(!(o||s&&s.data&&s.data.fullLandingConfiguration&&s.data.fullLandingConfiguration.landingConfiguration)){t.next=14;break}if(c=Object(f["a"])({ssrContext:i}),!c||c.includes("seeyour.info")){t.next=13;break}if(u=o?o.tariff:s.data.fullLandingConfiguration.company&&s.data.fullLandingConfiguration.company.tariff,!(u&&d["g"][u]<d["g"][d["h"].Large1])){t.next=13;break}return t.abrupt("return",Promise.reject({code:404}));case 13:return t.abrupt("return",o||s);case 14:return t.abrupt("return",Promise.reject({code:404}));case 15:case"end":return t.stop()}}),t,this)})));function n(n){return t.apply(this,arguments)}return n}(),beforeDestroy:function(){this.LANDING_CONFIGURATION_DETAILS_RESET()},mounted:function(){var t=o()(regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.landingConfigurationDetails&&(this.landingConfigurationDetails.customTools.customJivo&&("complete"===document.readyState?this.insertJivoScript():window.attachEvent?window.attachEvent("onload",this.insertJivoScript):window.addEventListener("load",this.insertJivoScript,!1)),this.trackPageVisit()),this.setIsEditMode(!1),l["a"].logClientPage(this.$router.currentRoute,this.landingConfigurationDetails.customTools),l["a"].logEvent("public-landing-open",this.path,this.pageUid||"main",0,this.$router.currentRoute),this.currentUserIsSuperAdmin&&this.$router.currentRoute.query.ts&&setTimeout((function(){e.takeScreenshot()}),2e3),this.isCartActive&&(console.log("this.companyId",this.companyId),n=Object(C["a"])(this.companyId),this.updateClientCart(n));case 6:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),methods:v({},Object(u["d"])("landingConfiguration",["setIsEditMode","LANDING_CONFIGURATION_DETAILS_RESET","setLandingConfigurationDetails","addToLandingCache"]),{},Object(u["d"])("companyPayment",["updateClientCart"]),{},Object(u["b"])("landingConfiguration",["fetchFullLandingConfigurationDetails"]),{},Object(u["b"])("image",["uploadImage"]),{},Object(u["b"])("company",["updateCompanyPageScreenshot"]),{},Object(u["b"])("auth",["trackPage"]),{trackPageVisit:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.landingConfigurationDetails&&this.landingConfigurationDetails.id&&this.landingConfigurationDetails.companyId)){t.next=9;break}return t.prev=1,t.next=4,this.trackPage({cId:this.landingConfigurationDetails.companyId,lId:this.landingConfigurationDetails.id});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,this,[[1,6]])})));function n(){return t.apply(this,arguments)}return n}(),insertJivoScript:function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//code.jivosite.com/script/widget/".concat(this.landingConfigurationDetails.customTools.customJivo);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},takeScreenshot:function(){var t=o()(regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y()(document.body,{windowWidth:375,width:375,scale:window.devicePixelRatio,imageTimeout:3e4});case 2:n=t.sent,n.toBlob(function(){var t=o()(regeneratorRuntime.mark((function t(n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new File([n],"screenshot.png",{type:"image/png"}),t.next=3,e.uploadImage({file:a,type:"image"});case 3:return i=t.sent,i.crossOrigin="anonymous",t.next=7,e.updateCompanyPageScreenshot({variables:{hostname:Object(f["a"])(),companyPath:w(e.$router.currentRoute),screenshotPath:i.file.name}});case 7:e.companyUpdateScreenshotErrorCode?e.$q.notify({type:"negative",message:e.$t(e.companyUpdateScreenshotErrorCode)}):console.log("DONE: ".concat(p["a"].imagePath).concat(i.file.name));case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),"image/png");case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),goBack:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(window&&window.history&&window.history.length>1)){t.next=5;break}return t.next=3,this.$router.go(-1);case 3:t.next=7;break;case 5:return t.next=7,this.$router.push({name:"landing",params:{pageUid:this.pageUid}});case 7:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),goHome:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.isHomeBtnLoading),"landing"===this.$router.currentRoute.name&&!this.pageUid){t.next=4;break}return t.next=4,this.$router.push({name:"landing"});case 4:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),goToCart:function(){var t=o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("client-cart"===this.$router.currentRoute.name){t.next=3;break}return t.next=3,this.$router.push({name:"client-cart",params:{path:this.path,pageUid:this.pageUid}});case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()})},D=k,_=(e("3c1b"),e("42e1")),x=Object(_["a"])(D,a,i,!1,null,null,null);n["default"]=x.exports},e060:function(t,n,e){}}]);
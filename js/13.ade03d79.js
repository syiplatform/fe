(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1fee":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row",class:t.$q.screen.lt.sm?"q-pa-xs":"q-py-lg q-px-xs"},[s("q-card",{staticClass:"row col-xs-12 bg-primary-3",class:{"q-pt-lg":t.referralSettingDetails&&t.referralSettingDetails.isBillable}},[s("q-card-section",{staticClass:"row col-xs-12 col-sm items-center",class:t.$q.screen.lt.sm?"justify-center":"q-pl-xl"},[s("span",{staticClass:"text-h6 text-primary text-weight-bold"},[t._v("\n          "+t._s(t.currentBonusAmount)+" "+t._s(t.$t("bonus_symbol"))+"\n        ")])]),s("q-card-section",{staticClass:"row col-xs-12 col-sm-auto",class:t.$q.screen.lt.sm?"q-pt-xs":""},[t.referralSettingDetails&&t.referralSettingDetails.isBillable?s("q-btn",{staticClass:"col-xs-12 q-mb-sm",attrs:{rounded:"",disabled:t.currentBonusAmount<t.minBonusAmount,label:t.$t("make_withdrawal_request"),color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.makeWithdrawalRequest()}}}):t._e(),s("q-btn",{staticClass:"col-xs-12 q-mb-sm",attrs:{rounded:"",label:t.$t("open_instruction_spend_bonus"),color:"info"},on:{click:function(e){return e.stopPropagation(),t.openInstruction("spend-bonus")}}}),s("q-btn",{staticClass:"col-xs-12",attrs:{rounded:"",label:t.$t("open_instruction_get_bonus"),color:"info"},on:{click:function(e){return e.stopPropagation(),t.openInstruction("get-bonus")}}})],1),t.referralSettingDetails&&t.referralSettingDetails.isBillable?s("q-badge",{staticClass:"text-subtitle1",attrs:{color:"info",floating:"",transparent:"","multi-line":""}},[t._v("\n        "+t._s(t.referralSettingDetails.agreementName)+"\n      ")]):t._e()],1),s("q-card",{staticClass:"row col-xs-12 bg-grey-3 q-my-sm"},[s("q-card-section",{staticClass:"col-xs-12 row"},[s("div",{staticClass:"col-xs-12 row justify-center"},[s("div",{staticClass:"q-px-md text-center"},[s("q-img",{attrs:{height:"150px",width:"205px",src:"/statics/about/bonus-step-1.png"}}),s("div",{staticClass:"q-py-md text-h5 text-secondary text-weight-thin"},[t._v("\n              1. "+t._s(t.$t("bonus_step_1"))+"\n            ")])],1),s("div",{staticClass:"q-px-md text-center"},[s("q-img",{attrs:{height:"150px",width:"137px",src:"/statics/about/bonus-step-2.png"}}),s("div",{staticClass:"q-py-md text-h5 text-secondary text-weight-thin"},[t._v("\n              2. "+t._s(t.$t("bonus_step_2"))+"\n            ")])],1),s("div",{staticClass:"q-px-md text-center"},[s("q-img",{attrs:{height:"150px",width:"124px",src:"/statics/about/bonus-step-3.png"}}),s("div",{staticClass:"q-py-md text-h5 text-secondary text-weight-thin"},[t._v("\n              3. "+t._s(t.$t("bonus_step_3",[t.referralSettingDetails&&t.referralSettingDetails.paymentPercent||30]))+"\n            ")])],1)]),s("div",{staticClass:"col-xs-12 row"},[s("div",{staticClass:"row col-xs-12 items-center col-sm no-padding"},[s("q-input",{ref:"referralLink",staticClass:"col-xs-12 col-sm",class:t.$q.screen.lt.sm?"q-px-md":"q-pl-xl q-pr-md",attrs:{outlined:"",readonly:"",dense:"",value:t.referralLink,"input-class":{"text-primary":!0,"text-center":t.$q.screen.lt.sm,"no-padding ":!t.$q.screen.lt.sm}}})],1),s("div",{staticClass:"col-xs-12 col-sm-auto row justify-center items-center",class:t.$q.screen.lt.sm?"q-pt-xs":""},[s("share",{attrs:{text:t.text,subject:t.subject,link:t.referralLink,copy:t.$refs.referralLink}})],1)])])],1),t.bonusHistoryList?s("q-list",{staticClass:"row col-xs-12 bg-white border-radius"},t._l(t.bonusHistoryList.items,(function(e){return s("q-item",{key:e.id,staticClass:"col-xs-12 bonus-row"},[s("q-item-section",{class:{"light-dimmed relative-position":"pending_payment"===e.validationStatus}},["referral_signup"===e.reason?s("div",[t._v("\n            "+t._s(t.$t("referral_signup_header"))+"\n          ")]):s("div",{staticClass:"text-subtitle2",class:{"text-positive":+e.amount>0,"text-negative":+e.amount<0}},[+e.amount>0?s("span",[t._v("+")]):t._e(),t._v("\n            "+t._s(e.amount)+t._s(t.$t("bonus_symbol"))+"\n          ")]),s("div",{staticClass:"text-caption q-mb-sm"},[t._v("\n            "+t._s(t._f("dateTimeText")(e.createdAt,t.currentUserTimezone))+"\n          ")]),e.reason?s("div",{staticClass:"text-caption text-primary"},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"info",size:"16px"}}),t._v("\n            "+t._s(t.$t(e.reason))+"\n          ")],1):t._e()]),s("q-item-section",["pending_payment"===e.validationStatus?s("div",{staticClass:"text-caption text-info"},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"timer",size:"16px"}}),t._v("\n            "+t._s(t.$t("bonus_pending_payment_status"))+"\n          ")],1):t._e(),"pending_withdrawal"===e.validationStatus?s("div",{staticClass:"text-caption text-info"},[s("q-icon",{staticClass:"q-mr-xs",attrs:{name:"timer",size:"16px"}}),t._v("\n            "+t._s(t.$t("bonus_pending_withdrawal_status"))+"\n          ")],1):t._e(),e.paymentHistory&&e.paymentHistory.companyId?s("div",[s("q-btn",{attrs:{dense:"",flat:"",color:"info","icon-right":"double_arrow",to:{name:"company-tariff-history",params:{companyId:e.paymentHistory.companyId}}}},[t._v("\n              "+t._s(t.$t("bonus_pending_payment_details"))+"\n            ")])],1):t._e()])],1)})),1):t._e()],1)])},n=[],a=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("96cf"),s("c973")),i=s.n(a),o=s("9523"),c=s.n(o),u=(s("c5f6"),s("1cb6")),l=s("2f62"),p=s("b06b"),d=s("ee47"),m=s("aacf"),f=s("2b78");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){c()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var x={name:"ClientUserBonus",mixins:[d["a"]],props:{userId:{type:[Number,String]}},meta:function(){return{title:this.$t("company_my_bonuses_page_title")}},components:{share:f["a"]},data:function(){return{pagination:{pageNumber:1,pageSize:50,orderBy:"createdAt",order:"DESC"},minBonusAmount:1e3,bonusAmount:1e3,subject:this.$t("share_referral_subject")}},computed:b({},Object(l["c"])("auth",["userProfile","currentUserId","currentUserTimezone","companyUser"]),{},Object(l["c"])("bonus",["currentBonusAmount","bonusHistoryList","referralList","referralSettingDetails","createWithdrawalRequestError"]),{referralLink:function(){return"".concat(m["a"].websiteUrl,"/referral/").concat((this.userId?this.companyUser:this.userProfile).referralCode)},text:function(){return"".concat(this.$t("share_referral_text")," ").concat(this.referralLink)}}),mounted:function(){var t=i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.userId){t.next=7;break}return t.next=3,this.fetchUser({variables:{id:+this.userId}});case 3:return t.next=5,this.fetchCurrentBonusAmount({variables:{userId:+this.userId}});case 5:t.next=10;break;case 7:return t.next=9,this.fetchClientProfile({variables:{}});case 9:this.trackUserAction({actionName:"openBonusPage"});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:b({},Object(l["b"])("auth",["fetchClientProfile","fetchUser","trackUserAction"]),{},Object(l["b"])("bonus",["fetchBonusHistoryList","fetchReferralList","fetchReferralSettingDetails","fetchCurrentBonusAmount","createWithdrawalRequest"]),{fetch:function(){var t=i()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchBonusHistoryList({variables:b({},this.pagination,{userId:+this.userId||this.currentUserId})});case 2:return t.next=4,this.fetchReferralList({variables:b({},this.pagination,{userId:+this.userId||this.currentUserId})});case 4:return t.next=6,this.fetchReferralSettingDetails({variables:{userId:+this.userId||this.currentUserId}});case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openInstruction:function(t){Object(p["a"])("".concat(m["a"].blog.bonusSystem,"#").concat(t)),u["a"].logEvent("user-bonus","open-instruction",t,0,this.$router.currentRoute)},makeWithdrawalRequest:function(){var t=this;this.$q.dialog({title:this.$t("withdrawal_dialog_title"),message:this.$t("withdrawal_dialog_text"),ok:this.$t("action_withdrawal"),cancel:this.$t("action_cancel"),persistent:!0,prompt:{model:this.bonusAmount,type:"number",isValid:function(e){return!(e<t.minBonusAmount||e>t.currentBonusAmount)}}}).onOk(function(){var e=i()(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createWithdrawalRequest({variables:{amount:s,currency:"RUB"}});case 3:if(!t.createWithdrawalRequestError){e.next=7;break}t.$q.notify({type:"negative",message:t.$t(t.createWithdrawalRequestError)}),e.next=12;break;case 7:return e.next=9,t.fetchCurrentBonusAmount({variables:{userId:+t.userId||t.currentUserId}});case 9:return e.next=11,t.fetchBonusHistoryList({variables:b({},t.pagination,{userId:+t.userId||t.currentUserId})});case 11:t.$q.notify({type:"positive",message:t.$t("withdrawal_request_create_succes")});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),t.$q.notify({type:"negative",message:t.$t("withdrawal_request_create_error")});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}())}})},_=x,g=(s("f8c7"),s("42e1")),y=Object(g["a"])(_,r,n,!1,null,"2021f904",null);e["default"]=y.exports},e4ab:function(t,e,s){},f8c7:function(t,e,s){"use strict";var r=s("e4ab"),n=s.n(r);n.a}}]);